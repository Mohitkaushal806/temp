import { Component, EventEmitter, Input, Output, } from '@angular/core';
import * as lodash from 'lodash';
import { WidgetType } from '../../x-sights-core.service';
import * as i0 from "@angular/core";
import * as i1 from "../../services/data.service";
import * as i2 from "../../x-sights-core.service";
import * as i3 from "ng-multiselect-dropdown";
import * as i4 from "devextreme-angular";
import * as i5 from "devextreme-angular/ui/nested";
import * as i6 from "@angular/common";
import * as i7 from "@angular/forms";
export class XSightsPublicDashboardComponent {
    constructor(dataService, xsights) {
        this.dataService = dataService;
        this.xsights = xsights;
        this.dashboardUrl = '';
        this.adminId = 0;
        this.dashboardLoaded = new EventEmitter();
        this.mtrSource = '138';
        this.decodedParams = {};
        this.dashboardData = null;
        this.filters = [];
        this.dropdownSettings = {};
        this.tableDatas = {};
        this.dumpData = [];
    }
    ngOnInit() {
        // this.decodeUrl();
        this.dropdownSettings = {
            singleSelection: false,
            enableCheckAll: false,
            allowSearchFilter: true,
        };
    }
    ngOnChanges(changes) {
        //Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.
        //Add '${implements OnChanges}' to the class.
        if (changes['dashboardUrl'].previousValue !=
            changes['dashboardUrl'].currentValue ||
            changes['adminId'].previousValue != changes['adminId'].currentValue) {
            this.decodeUrl();
        }
    }
    checkDashboardLoading() {
        const elements = document.querySelectorAll('.lds-ellipsis');
        console.log(elements.length);
        if (elements.length == 0) {
            this.dashboardLoaded.emit({
                isLoaded: true,
            });
        }
    }
    decodeUrl() {
        this.dataService.getDecodedUrl(this.dashboardUrl).then((res) => {
            const urlParamsStr = res.data[0].split('?')[1];
            const urlParamsArr = urlParamsStr.split('&');
            urlParamsArr.forEach((param) => {
                this.decodedParams[param.split('=')[0]] = param.split('=')[1];
            });
            this.getSharedDashboard();
        });
    }
    setGraphOrder(a, b) {
        if (a.order < b.order) {
            return -1;
        }
        if (a.order > b.order) {
            return 1;
        }
        return 0;
    }
    getSharedDashboard() {
        this.adminId = this.decodedParams.foAdminId;
        let params = '?dash_id=' +
            this.decodedParams.dash_id +
            '&fileId=' +
            this.decodedParams.fileId;
        this.dataService
            .getSharedDashboard(params, this.adminId)
            .then((res) => {
            this.filters = res.data[0].filters;
            res.data[0].graphs = res.data[0].graphs.sort(this.setGraphOrder);
            this.dashboardData = res.data[0];
            this.dataService
                .getSharedDashboardData(this.dashboardData.id, this.adminId)
                .then((res) => {
                // //console.log(res);
                this.dumpData = res;
                lodash.forEach(this.dashboardData.graphs, (graph) => {
                    if (graph.graphType != 2) {
                        let dataIndex = res.findIndex((d) => d.chartId == 'graph-' + graph.graph_id);
                        let graphD = typeof res[dataIndex].data != "object"
                            ? res[res[dataIndex].data].data
                            : res[dataIndex].data;
                        if (dataIndex != -1) {
                            this.filters = lodash.map(this.filters, (filter) => {
                                if (filter.sourceId.toString() == graph.sourceid.toString()) {
                                    filter.values = Object.keys(lodash.groupBy(graphD, filter.fieldName)).map((key, index) => ({
                                        id: index,
                                        text: key,
                                    }));
                                    filter.selValues = [];
                                }
                                return filter;
                            });
                            let tempGraphData = {
                                rows: graph.graph_structure.xAxis,
                                columns: graph.graph_structure.yAxis,
                                aggregationFunctions: graph.graph_structure.aggreagations,
                                filter: graph.graph_structure.filter,
                                customVariable: graph.graph_structure.derivedVariables,
                                dataFormat: [],
                                colToShow: null,
                                lastLevelColumns: graph.graph_structure.lastLevelData ?? [],
                                dateVariable: graph.graph_structure.dateVariable,
                                chartType: graph.graph_structure.chartType,
                            };
                            if (graph.sourceid.toString() == this.mtrSource) {
                                tempGraphData = this.dataService.keyConverter(tempGraphData, res[dataIndex].columns, 1);
                            }
                            this.buildChart(graph, graphD, tempGraphData);
                        }
                    }
                });
            });
        });
    }
    filterData(data, sourceId) {
        let filterToApply = this.filters.filter((filter) => filter.sourceId.toString() == sourceId.toString());
        filterToApply.forEach((filter) => {
            if (filter.selValues.length) {
                let validValues = filter.selValues.map((value) => value.text);
                let temp = [];
                let groupData = lodash.groupBy(data, filter.fieldName);
                let allKeys = Object.keys(groupData);
                allKeys.forEach((key) => {
                    if (validValues.includes(key)) {
                        temp.push(...groupData[key]);
                    }
                });
                data = temp;
            }
        });
        return data;
    }
    buildChart(widgetData, data, tempData) {
        let _self = this;
        return new Promise(async (resolve, reject) => {
            data = this.filterData(data, widgetData.sourceid.toString());
            // data = this.filterData(data, widgetData.sourceid);
            if (widgetData.graphType == 1) {
                let graphData = {
                    graphId: 'graph-' + widgetData.graph_id,
                    graphTitle: widgetData.graphname,
                    rows: tempData.rows[0],
                    columns: tempData.columns[0],
                    graphTypes: widgetData.graph_structure.chartType[0],
                    graphData: data,
                    aggregationFunctions: tempData.aggregationFunctions[0],
                    filter: tempData.filter,
                    colors: widgetData.graph_structure.colColours[0],
                    range: {
                        startDate: widgetData.graph_structure.startDate,
                        endDate: widgetData.graph_structure.endDate,
                    },
                    dateVariable: tempData.dateVariable,
                    rangeFilter: widgetData.graph_structure.rangeFilter,
                    comparison: widgetData.graph_structure.comparison ?? [],
                    customVariable: tempData.customVariable,
                    dataFormat: tempData.dataFormat ?? [],
                    lastLevelColumns: tempData.lastLevelColumns ?? [],
                };
                let response = await _self.xsights.build(WidgetType.TREND, graphData);
                resolve(response);
                _self.checkDashboardLoading();
            }
            else if (widgetData.graphType == 3) {
                let tableData = {
                    rows: tempData.rows,
                    column: tempData.columns,
                    aggregationFunction: tempData.aggregationFunctions,
                    filter: tempData.filter,
                    derivedVariables: tempData.customVariable,
                    dataFormat: tempData.dataFormat ?? [],
                    data: data,
                    categories: widgetData.graph_structure.chartType,
                };
                _self.tableDatas['table-graph-' + widgetData.graph_id] =
                    await _self.xsights.build(WidgetType.PIVOT_TABLE, tableData);
                resolve(true);
                setTimeout(() => {
                    _self.checkDashboardLoading();
                }, 500);
            }
            else {
                let graphdata = {
                    graphId: 'graph-' + widgetData.graph_id,
                    graphTitle: widgetData.graphname,
                    rows: tempData.rows,
                    columns: tempData.columns,
                    aggregationFunctions: tempData.aggregationFunctions,
                    filter: tempData.filter,
                    customVariable: tempData.customVariable,
                    dataFormat: tempData.dataFormat ?? [],
                    lastLevelColumns: tempData.lastLevelColumns ?? [],
                    graphTypes: widgetData.graph_structure.chartType,
                    graphData: data,
                    colors: widgetData.graph_structure.colColours,
                };
                let response = await this.xsights.build(WidgetType.GRAPH, graphdata);
                resolve(response);
                _self.checkDashboardLoading();
            }
        });
    }
    async filteredDashboard() {
        for (const element of this.dashboardData.graphs) {
            const graph = element;
            let res = null;
            if (graph.graphType != 2) {
                let dataIndex = this.dumpData.findIndex((d) => d.chartId == 'graph-' + graph.graph_id);
                res = this.dumpData[dataIndex].data;
                let tempGraphData = {
                    rows: graph.graph_structure.xAxis,
                    columns: graph.graph_structure.yAxis,
                    aggregationFunctions: graph.graph_structure.aggreagations,
                    filter: graph.graph_structure.filter,
                    customVariable: graph.graph_structure.derivedVariables,
                    dataFormat: [],
                    colToShow: null,
                    lastLevelColumns: graph.graph_structure.lastLevelData ?? [],
                    dateVariable: graph.graph_structure.dateVariable,
                    chartType: graph.graph_structure.chartType,
                };
                if (graph.sourceid.toString() == this.mtrSource) {
                    tempGraphData = this.dataService.keyConverter(tempGraphData, this.dumpData[dataIndex].columns, 1);
                }
                this.buildChart(graph, res, tempGraphData);
            }
        }
    }
}
XSightsPublicDashboardComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: XSightsPublicDashboardComponent, deps: [{ token: i1.DataService }, { token: i2.XSightsCoreService }], target: i0.ɵɵFactoryTarget.Component });
XSightsPublicDashboardComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.0.3", type: XSightsPublicDashboardComponent, selector: "x-sights-public-dashboard", inputs: { dashboardUrl: "dashboardUrl", adminId: "adminId" }, outputs: { dashboardLoaded: "dashboardLoaded" }, usesOnChanges: true, ngImport: i0, template: "<div *ngIf=\"dashboardData !=null\">\n    <div class=\"dash_graph_sec\">\n        <div class=\"dash_graph dashboard-wrapper\">\n            <div>\n                <h3 class=\"graph_name\" style=\"height: 44px;\">{{dashboardData.dashboard_name}} </h3>\n            </div>\n            <div class=\"filter-container\" *ngIf=\"filters.length\">\n                <h3>Filters:</h3>\n                <div class=\"col-lg-12 row\">\n                    <div class=\"col-lg-3\" *ngFor=\"let filter of filters;let i=index\"> <ng-multiselect-dropdown [placeholder]=\"'Select ' + filter.fieldName + '...'\" [(ngModel)]=\"filter.selValues\" (onSelect)=\"filteredDashboard()\"\n                            (onDeSelect)=\"filteredDashboard()\" [settings]=\"dropdownSettings\" [data]=\"filter.values\">\n                        </ng-multiselect-dropdown> </div>\n                </div>\n            </div>\n            <div class=\"row graph_design\" id=\"dashboardScreen\"> \n                <ng-container *ngFor=\"let graph of dashboardData?.graphs;let i=index;\">\n                    <!-- <div class=\"page-break\" *ngIf=\"i % 5 == 0 && i != 0\"></div> -->\n                    <ng-container *ngIf=\"graph.graphType != 3 && graph.graphType != 2\">\n                        <div class=\"dashboard-graph\"\n                            [ngClass]=\"{'col-lg-12': graph.graph_index == 1,'col-lg-6': graph.graph_index == 2,'col-lg-4': graph.graph_index == 3,'col-lg-3': graph.graph_index == 4}\"\n                            style=\"min-height: 370px; padding: 0px;\"> <!-- loader start -->\n                            <h3 *ngIf=\"graph.graph_structure.xAxis[0] != '***LABEL***'\" style=\"text-align: center; background-color: #eee; padding: 2px;\">{{graph.graphname}}</h3>\n                            <div [id]=\"'graph-'+ graph.graph_id\" style=\"position: relative; padding: 10px; padding-top: 45px;\">\n                                <div class=\"lds-ellipsis\">\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                </div> <!-- loader end -->\n                            </div>\n                        </div>\n                    </ng-container>\n                    <!-- <div *ngIf=\"graph.graphType !=3 && graph.graphType !=2\" class=\"dashboard-graph\" [id]=\"'graph-'+\n                        graph.graph_id\" [ngClass]=\"{'col-lg-12': graph.graph_index==1,'col-lg-6':\n                        graph.graph_index==2,'col-lg-4': graph.graph_index==3,'col-lg-3': graph.graph_index==4}\"\n                        style=\"min-height: 370px; display: flex;\"> \n                        <div class=\"lds-ellipsis\">\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                        </div> \n                    </div> -->\n                    <div *ngIf=\"graph.graphType==2\" class=\"dashboard-graph\" [id]=\"'table-graph-'+ graph.graph_id\"\n                        [ngClass]=\"{'col-lg-12':\n                        graph.graph_index==1,'col-lg-6': graph.graph_index==2,'col-lg-4':\n                        graph.graph_index==3,'col-lg-3': graph.graph_index==4}\" style=\"display: flex;\n                        flex-direction: column; border-bottom: 0px; background-color:antiquewhite;\">\n                        <!-- loader start -->\n                        <h2 style=\"text-align: center; margin-bottom: 0px;\">\n                            {{graph.graphname}}</h2> <!-- loader end -->\n                    </div>\n                    <div *ngIf=\"graph.graphType==3\" class=\"dashboard-graph\" [id]=\"'table-graph-'+\n                        graph.graph_id\" [ngClass]=\"{'col-lg-12': graph.graph_index==1,'col-lg-6':\n                        graph.graph_index==2,'col-lg-4': graph.graph_index==3,'col-lg-3': graph.graph_index==4}\"\n                        style=\"min-height: 300px; display: flex; flex-direction: column; padding-bottom: 2%;\">\n                        <!-- loader start -->\n                        <h3 style=\"text-align: center;\">{{graph.graphname}}</h3>\n                        <ng-container *ngIf=\"tableDatas.hasOwnProperty('table-graph-' + graph.graph_id)\">\n                            <dx-pivot-grid [allowSortingBySummary]=\"true\" [allowSorting]=\"true\" [allowFiltering]=\"true\"\n                                [showBorders]=\"true\" [dataSource]=\"tableDatas['table-graph-' + graph.graph_id]\">\n                                <dxo-field-chooser [enabled]=\"false\"></dxo-field-chooser> </dx-pivot-grid>\n                        </ng-container> <ng-container *ngIf=\"tableDatas['table-graph-' +\n                            graph.graph_id]==undefined\">\n                            <div class=\"lds-ellipsis\">\n                                <div></div>\n                                <div>\n                                </div>\n                                <div></div>\n                                <div></div>\n                            </div>\n                        </ng-container>\n                        <!-- loader end -->\n                    </div>\n                </ng-container> </div>\n        </div>\n    </div>\n</div>", styles: [".left-sidebar .nav-link{text-transform:capitalize}.left-sidebar i{margin-right:10px}.left-sidebar .nav-tabs .nav-item{text-transform:capitalize}::ng-deep .left-sidebar .nav-item{text-transform:capitalize}::ng-deep .modal{z-index:1060}.filter-container{padding:10px;background:whitesmoke;border:2px solid #ccc}.filter-container h3{margin-bottom:auto}.filter-container .col-lg-3{padding-left:0}.search-filter{height:23px}.search-group{display:flex;align-items:center;justify-content:space-between}.search-group .filter-icon{margin:0}.dash_graph_sec .dash_graph{background-color:#fff}.dash_graph_sec .dash_graph .graph_name{text-align:center;background-color:#000;color:#fff;padding:5px;margin-bottom:0}.dash_graph_sec .dash_graph .graph_design{margin:0}.dashboard-graph{border:1px solid #e4e4e4;border-top:0px;align-items:center;justify-content:center}.modal{z-index:1060!important}::ng-deep .dropdown-custom{inset:103% 0 auto auto!important}.dashname{border-style:groove;background-color:#eee;width:64px;height:34px;display:flex;justify-content:center;align-items:center}.beans-list{padding-left:0;display:flex;flex-wrap:wrap}.beans{border-style:groove;background-color:#fd8309;color:#fff;border-radius:10px;padding:1%;border-color:#fd8309}.captcha-box{display:flex;justify-content:center;align-items:center;height:100%;position:absolute;width:100%;padding:5%;background:#ccc}.dashboard-wrapper{box-shadow:1px 1px 10px #ddd;border-radius:5px}.main_container{background-size:cover;background-repeat:no-repeat}@media print{.page-break{page-break-after:always!important}#dashboardScreen{display:block}}@media print{::ng-deep body,::ng-deep html,::ng-deep #wrapper{width:100%!important}::ng-deep .highcharts-root{width:100%!important}}\n"], components: [{ type: i3.MultiSelectComponent, selector: "ng-multiselect-dropdown", inputs: ["disabled", "placeholder", "settings", "data"], outputs: ["onFilterChange", "onDropDownClose", "onSelect", "onDeSelect", "onSelectAll", "onDeSelectAll"] }, { type: i4.DxPivotGridComponent, selector: "dx-pivot-grid", inputs: ["allowExpandAll", "allowFiltering", "allowSorting", "allowSortingBySummary", "dataFieldArea", "dataSource", "disabled", "elementAttr", "encodeHtml", "export", "fieldChooser", "fieldPanel", "headerFilter", "height", "hideEmptySummaryCells", "hint", "loadPanel", "rowHeaderLayout", "rtlEnabled", "scrolling", "showBorders", "showColumnGrandTotals", "showColumnTotals", "showRowGrandTotals", "showRowTotals", "showTotalsPrior", "stateStoring", "tabIndex", "texts", "visible", "width", "wordWrapEnabled"], outputs: ["onCellClick", "onCellPrepared", "onContentReady", "onContextMenuPreparing", "onDisposing", "onExporting", "onInitialized", "onOptionChanged", "allowExpandAllChange", "allowFilteringChange", "allowSortingChange", "allowSortingBySummaryChange", "dataFieldAreaChange", "dataSourceChange", "disabledChange", "elementAttrChange", "encodeHtmlChange", "exportChange", "fieldChooserChange", "fieldPanelChange", "headerFilterChange", "heightChange", "hideEmptySummaryCellsChange", "hintChange", "loadPanelChange", "rowHeaderLayoutChange", "rtlEnabledChange", "scrollingChange", "showBordersChange", "showColumnGrandTotalsChange", "showColumnTotalsChange", "showRowGrandTotalsChange", "showRowTotalsChange", "showTotalsPriorChange", "stateStoringChange", "tabIndexChange", "textsChange", "visibleChange", "widthChange", "wordWrapEnabledChange"] }, { type: i5.DxoFieldChooserComponent, selector: "dxo-field-chooser", inputs: ["allowSearch", "applyChangesMode", "enabled", "height", "layout", "searchTimeout", "texts", "title", "width"] }], directives: [{ type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i6.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i7.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i7.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i6.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: XSightsPublicDashboardComponent, decorators: [{
            type: Component,
            args: [{ selector: 'x-sights-public-dashboard', template: "<div *ngIf=\"dashboardData !=null\">\n    <div class=\"dash_graph_sec\">\n        <div class=\"dash_graph dashboard-wrapper\">\n            <div>\n                <h3 class=\"graph_name\" style=\"height: 44px;\">{{dashboardData.dashboard_name}} </h3>\n            </div>\n            <div class=\"filter-container\" *ngIf=\"filters.length\">\n                <h3>Filters:</h3>\n                <div class=\"col-lg-12 row\">\n                    <div class=\"col-lg-3\" *ngFor=\"let filter of filters;let i=index\"> <ng-multiselect-dropdown [placeholder]=\"'Select ' + filter.fieldName + '...'\" [(ngModel)]=\"filter.selValues\" (onSelect)=\"filteredDashboard()\"\n                            (onDeSelect)=\"filteredDashboard()\" [settings]=\"dropdownSettings\" [data]=\"filter.values\">\n                        </ng-multiselect-dropdown> </div>\n                </div>\n            </div>\n            <div class=\"row graph_design\" id=\"dashboardScreen\"> \n                <ng-container *ngFor=\"let graph of dashboardData?.graphs;let i=index;\">\n                    <!-- <div class=\"page-break\" *ngIf=\"i % 5 == 0 && i != 0\"></div> -->\n                    <ng-container *ngIf=\"graph.graphType != 3 && graph.graphType != 2\">\n                        <div class=\"dashboard-graph\"\n                            [ngClass]=\"{'col-lg-12': graph.graph_index == 1,'col-lg-6': graph.graph_index == 2,'col-lg-4': graph.graph_index == 3,'col-lg-3': graph.graph_index == 4}\"\n                            style=\"min-height: 370px; padding: 0px;\"> <!-- loader start -->\n                            <h3 *ngIf=\"graph.graph_structure.xAxis[0] != '***LABEL***'\" style=\"text-align: center; background-color: #eee; padding: 2px;\">{{graph.graphname}}</h3>\n                            <div [id]=\"'graph-'+ graph.graph_id\" style=\"position: relative; padding: 10px; padding-top: 45px;\">\n                                <div class=\"lds-ellipsis\">\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                </div> <!-- loader end -->\n                            </div>\n                        </div>\n                    </ng-container>\n                    <!-- <div *ngIf=\"graph.graphType !=3 && graph.graphType !=2\" class=\"dashboard-graph\" [id]=\"'graph-'+\n                        graph.graph_id\" [ngClass]=\"{'col-lg-12': graph.graph_index==1,'col-lg-6':\n                        graph.graph_index==2,'col-lg-4': graph.graph_index==3,'col-lg-3': graph.graph_index==4}\"\n                        style=\"min-height: 370px; display: flex;\"> \n                        <div class=\"lds-ellipsis\">\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                        </div> \n                    </div> -->\n                    <div *ngIf=\"graph.graphType==2\" class=\"dashboard-graph\" [id]=\"'table-graph-'+ graph.graph_id\"\n                        [ngClass]=\"{'col-lg-12':\n                        graph.graph_index==1,'col-lg-6': graph.graph_index==2,'col-lg-4':\n                        graph.graph_index==3,'col-lg-3': graph.graph_index==4}\" style=\"display: flex;\n                        flex-direction: column; border-bottom: 0px; background-color:antiquewhite;\">\n                        <!-- loader start -->\n                        <h2 style=\"text-align: center; margin-bottom: 0px;\">\n                            {{graph.graphname}}</h2> <!-- loader end -->\n                    </div>\n                    <div *ngIf=\"graph.graphType==3\" class=\"dashboard-graph\" [id]=\"'table-graph-'+\n                        graph.graph_id\" [ngClass]=\"{'col-lg-12': graph.graph_index==1,'col-lg-6':\n                        graph.graph_index==2,'col-lg-4': graph.graph_index==3,'col-lg-3': graph.graph_index==4}\"\n                        style=\"min-height: 300px; display: flex; flex-direction: column; padding-bottom: 2%;\">\n                        <!-- loader start -->\n                        <h3 style=\"text-align: center;\">{{graph.graphname}}</h3>\n                        <ng-container *ngIf=\"tableDatas.hasOwnProperty('table-graph-' + graph.graph_id)\">\n                            <dx-pivot-grid [allowSortingBySummary]=\"true\" [allowSorting]=\"true\" [allowFiltering]=\"true\"\n                                [showBorders]=\"true\" [dataSource]=\"tableDatas['table-graph-' + graph.graph_id]\">\n                                <dxo-field-chooser [enabled]=\"false\"></dxo-field-chooser> </dx-pivot-grid>\n                        </ng-container> <ng-container *ngIf=\"tableDatas['table-graph-' +\n                            graph.graph_id]==undefined\">\n                            <div class=\"lds-ellipsis\">\n                                <div></div>\n                                <div>\n                                </div>\n                                <div></div>\n                                <div></div>\n                            </div>\n                        </ng-container>\n                        <!-- loader end -->\n                    </div>\n                </ng-container> </div>\n        </div>\n    </div>\n</div>", styles: [".left-sidebar .nav-link{text-transform:capitalize}.left-sidebar i{margin-right:10px}.left-sidebar .nav-tabs .nav-item{text-transform:capitalize}::ng-deep .left-sidebar .nav-item{text-transform:capitalize}::ng-deep .modal{z-index:1060}.filter-container{padding:10px;background:whitesmoke;border:2px solid #ccc}.filter-container h3{margin-bottom:auto}.filter-container .col-lg-3{padding-left:0}.search-filter{height:23px}.search-group{display:flex;align-items:center;justify-content:space-between}.search-group .filter-icon{margin:0}.dash_graph_sec .dash_graph{background-color:#fff}.dash_graph_sec .dash_graph .graph_name{text-align:center;background-color:#000;color:#fff;padding:5px;margin-bottom:0}.dash_graph_sec .dash_graph .graph_design{margin:0}.dashboard-graph{border:1px solid #e4e4e4;border-top:0px;align-items:center;justify-content:center}.modal{z-index:1060!important}::ng-deep .dropdown-custom{inset:103% 0 auto auto!important}.dashname{border-style:groove;background-color:#eee;width:64px;height:34px;display:flex;justify-content:center;align-items:center}.beans-list{padding-left:0;display:flex;flex-wrap:wrap}.beans{border-style:groove;background-color:#fd8309;color:#fff;border-radius:10px;padding:1%;border-color:#fd8309}.captcha-box{display:flex;justify-content:center;align-items:center;height:100%;position:absolute;width:100%;padding:5%;background:#ccc}.dashboard-wrapper{box-shadow:1px 1px 10px #ddd;border-radius:5px}.main_container{background-size:cover;background-repeat:no-repeat}@media print{.page-break{page-break-after:always!important}#dashboardScreen{display:block}}@media print{::ng-deep body,::ng-deep html,::ng-deep #wrapper{width:100%!important}::ng-deep .highcharts-root{width:100%!important}}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.DataService }, { type: i2.XSightsCoreService }]; }, propDecorators: { dashboardUrl: [{
                type: Input
            }], adminId: [{
                type: Input
            }], dashboardLoaded: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieC1zaWdodHMtcHVibGljLWRhc2hib2FyZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy94LXNpZ2h0cy1jb3JlL3NyYy9saWIvY29tcG9uZW50cy94LXNpZ2h0cy1wdWJsaWMtZGFzaGJvYXJkL3gtc2lnaHRzLXB1YmxpYy1kYXNoYm9hcmQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMveC1zaWdodHMtY29yZS9zcmMvbGliL2NvbXBvbmVudHMveC1zaWdodHMtcHVibGljLWRhc2hib2FyZC94LXNpZ2h0cy1wdWJsaWMtZGFzaGJvYXJkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEdBRVAsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxLQUFLLE1BQU0sTUFBTSxRQUFRLENBQUM7QUFHakMsT0FBTyxFQUFFLFVBQVUsRUFBc0IsTUFBTSw2QkFBNkIsQ0FBQzs7Ozs7Ozs7O0FBTzdFLE1BQU0sT0FBTywrQkFBK0I7SUFjMUMsWUFDVSxXQUF3QixFQUN4QixPQUEyQjtRQUQzQixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixZQUFPLEdBQVAsT0FBTyxDQUFvQjtRQWY1QixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixZQUFPLEdBQVEsQ0FBQyxDQUFDO1FBQ2hCLG9CQUFlLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFFMUQsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUUxQixrQkFBYSxHQUFRLEVBQUUsQ0FBQztRQUN4QixrQkFBYSxHQUFRLElBQUksQ0FBQztRQUMxQixZQUFPLEdBQVEsRUFBRSxDQUFDO1FBQ2xCLHFCQUFnQixHQUFRLEVBQUUsQ0FBQztRQUMzQixlQUFVLEdBQVEsRUFBRSxDQUFDO1FBQ3JCLGFBQVEsR0FBUSxF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LEVBQUUsYUFBYSxDQUFDLENBQUM7YUFDNUM7U0FDRjtJQUNILENBQUM7OzRIQXZRVSwrQkFBK0I7Z0hBQS9CLCtCQUErQixxTUNsQjVDLDR3S0E2RU07MkZEM0RPLCtCQUErQjtrQkFMM0MsU0FBUzsrQkFDRSwyQkFBMkI7bUlBSzVCLFlBQVk7c0JBQXBCLEtBQUs7Z0JBQ0csT0FBTztzQkFBZixLQUFLO2dCQUNJLGVBQWU7c0JBQXhCLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBTaW1wbGVDaGFuZ2VzLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIGxvZGFzaCBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgX19hd2FpdGVyIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgRGF0YVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9kYXRhLnNlcnZpY2UnO1xuaW1wb3J0IHsgV2lkZ2V0VHlwZSwgWFNpZ2h0c0NvcmVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4veC1zaWdodHMtY29yZS5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAneC1zaWdodHMtcHVibGljLWRhc2hib2FyZCcsXG4gIHRlbXBsYXRlVXJsOiAnLi94LXNpZ2h0cy1wdWJsaWMtZGFzaGJvYXJkLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4veC1zaWdodHMtcHVibGljLWRhc2hib2FyZC5jb21wb25lbnQuc2NzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBYU2lnaHRzUHVibGljRGFzaGJvYXJkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgZGFzaGJvYXJkVXJsOiBzdHJpbmcgPSAnJztcbiAgQElucHV0KCkgYWRtaW5JZDogYW55ID0gMDtcbiAgQE91dHB1dCgpIGRhc2hib2FyZExvYWRlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgcHJpdmF0ZSBtdHJTb3VyY2UgPSAnMTM4JztcblxuICBkZWNvZGVkUGFyYW1zOiBhbnkgPSB7fTtcbiAgZGFzaGJvYXJkRGF0YTogYW55ID0gbnVsbDtcbiAgZmlsdGVyczogYW55ID0gW107XG4gIGRyb3Bkb3duU2V0dGluZ3M6IGFueSA9IHt9O1xuICB0YWJsZURhdGFzOiBhbnkgPSB7fTtcbiAgZHVtcERhdGE6IGFueSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZGF0YVNlcnZpY2U6IERhdGFTZXJ2aWNlLFxuICAgIHByaXZhdGUgeHNpZ2h0czogWFNpZ2h0c0NvcmVTZXJ2aWNlXG4gICkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICAvLyB0aGlzLmRlY29kZVVybCgpO1xuICAgIHRoaXMuZHJvcGRvd25TZXR0aW5ncyA9IHtcbiAgICAgIHNpbmdsZVNlbGVjdGlvbjogZmFsc2UsXG4gICAgICBlbmFibGVDaGVja0FsbDogZmFsc2UsXG4gICAgICBhbGxvd1NlYXJjaEZpbHRlcjogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIC8vQ2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgbGlmZWN5Y2xlIGhvb2suIFVzZSBpdCB0byBpbmplY3QgZGVwZW5kZW5jaWVzLCBidXQgYXZvaWQgYW55IHNlcmlvdXMgd29yayBoZXJlLlxuICAgIC8vQWRkICcke2ltcGxlbWVudHMgT25DaGFuZ2VzfScgdG8gdGhlIGNsYXNzLlxuICAgIGlmIChcbiAgICAgIGNoYW5nZXNbJ2Rhc2hib2FyZFVybCddLnByZXZpb3VzVmFsdWUgIT1cbiAgICAgICAgY2hhbmdlc1snZGFzaGJvYXJkVXJsJ10uY3VycmVudFZhbHVlIHx8XG4gICAgICBjaGFuZ2VzWydhZG1pbklkJ10ucHJldmlvdXNWYWx1ZSAhPSBjaGFuZ2VzWydhZG1pbklkJ10uY3VycmVudFZhbHVlXG4gICAgKSB7XG4gICAgICB0aGlzLmRlY29kZVVybCgpO1xuICAgIH1cbiAgfVxuXG5cbiAgY2hlY2tEYXNoYm9hcmRMb2FkaW5nKCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxkcy1lbGxpcHNpcycpO1xuICAgIGNvbnNvbGUubG9nKGVsZW1lbnRzLmxlbmd0aCk7XG4gICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PSAwKSB7XG4gICAgICB0aGlzLmRhc2hib2FyZExvYWRlZC5lbWl0KHtcbiAgICAgICAgaXNMb2FkZWQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBkZWNvZGVVcmwoKSB7XG4gICAgdGhpcy5kYXRhU2VydmljZS5nZXREZWNvZGVkVXJsKHRoaXMuZGFzaGJvYXJkVXJsKS50aGVuKChyZXM6IGFueSkgPT4ge1xuICAgICAgY29uc3QgdXJsUGFyYW1zU3RyID0gcmVzLmRhdGFbMF0uc3BsaXQoJz8nKVsxXTtcbiAgICAgIGNvbnN0IHVybFBhcmFtc0FyciA9IHVybFBhcmFtc1N0ci5zcGxpdCgnJicpO1xuICAgICAgdXJsUGFyYW1zQXJyLmZvckVhY2goKHBhcmFtOiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5kZWNvZGVkUGFyYW1zW3BhcmFtLnNwbGl0KCc9JylbMF1dID0gcGFyYW0uc3BsaXQoJz0nKVsxXTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5nZXRTaGFyZWREYXNoYm9hcmQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEdyYXBoT3JkZXIoYTogYW55LCBiOiBhbnkpIHtcbiAgICBpZiAoYS5vcmRlciA8IGIub3JkZXIpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaWYgKGEub3JkZXIgPiBiLm9yZGVyKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBnZXRTaGFyZWREYXNoYm9hcmQoKSB7XG4gICAgdGhpcy5hZG1pbklkID0gdGhpcy5kZWNvZGVkUGFyYW1zLmZvQWRtaW5JZDtcbiAgICBsZXQgcGFyYW1zID1cbiAgICAgICc/ZGFzaF9pZD0nICtcbiAgICAgIHRoaXMuZGVjb2RlZFBhcmFtcy5kYXNoX2lkICtcbiAgICAgICcmZmlsZUlkPScgK1xuICAgICAgdGhpcy5kZWNvZGVkUGFyYW1zLmZpbGVJZDtcbiAgICB0aGlzLmRhdGFTZXJ2aWNlXG4gICAgICAuZ2V0U2hhcmVkRGFzaGJvYXJkKHBhcmFtcywgdGhpcy5hZG1pbklkKVxuICAgICAgLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgIHRoaXMuZmlsdGVycyA9IHJlcy5kYXRhWzBdLmZpbHRlcnM7XG4gICAgICAgIHJlcy5kYXRhWzBdLmdyYXBocyA9IHJlcy5kYXRhWzBdLmdyYXBocy5zb3J0KHRoaXMuc2V0R3JhcGhPcmRlcik7XG4gICAgICAgIHRoaXMuZGFzaGJvYXJkRGF0YSA9IHJlcy5kYXRhWzBdO1xuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlXG4gICAgICAgICAgLmdldFNoYXJlZERhc2hib2FyZERhdGEodGhpcy5kYXNoYm9hcmREYXRhLmlkLCB0aGlzLmFkbWluSWQpXG4gICAgICAgICAgLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyAvL2NvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgICB0aGlzLmR1bXBEYXRhID0gcmVzO1xuICAgICAgICAgICAgbG9kYXNoLmZvckVhY2godGhpcy5kYXNoYm9hcmREYXRhLmdyYXBocywgKGdyYXBoOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGdyYXBoLmdyYXBoVHlwZSAhPSAyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGFJbmRleCA9IHJlcy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAoZDogYW55KSA9PiBkLmNoYXJ0SWQgPT0gJ2dyYXBoLScgKyBncmFwaC5ncmFwaF9pZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbGV0IGdyYXBoRCA9XG4gICAgICAgICAgICAgICAgICB0eXBlb2YgcmVzW2RhdGFJbmRleF0uZGF0YSAhPSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVzW3Jlc1tkYXRhSW5kZXhdLmRhdGFdLmRhdGFcbiAgICAgICAgICAgICAgICAgICAgOiByZXNbZGF0YUluZGV4XS5kYXRhO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhSW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVycyA9IGxvZGFzaC5tYXAodGhpcy5maWx0ZXJzLChmaWx0ZXI6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgZmlsdGVyLnNvdXJjZUlkLnRvU3RyaW5nKCkgPT0gZ3JhcGguc291cmNlaWQudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIudmFsdWVzID0gT2JqZWN0LmtleXMoXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2Rhc2guZ3JvdXBCeShncmFwaEQsIGZpbHRlci5maWVsZE5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgKS5tYXAoKGtleSwgaW5kZXgpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5zZWxWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBsZXQgdGVtcEdyYXBoRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcm93czogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLnhBeGlzLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiBncmFwaC5ncmFwaF9zdHJ1Y3R1cmUueUF4aXMsXG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uRnVuY3Rpb25zOiBncmFwaC5ncmFwaF9zdHJ1Y3R1cmUuYWdncmVhZ2F0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBncmFwaC5ncmFwaF9zdHJ1Y3R1cmUuZmlsdGVyLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21WYXJpYWJsZTogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmRlcml2ZWRWYXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFGb3JtYXQ6IFtdLFxuICAgICAgICAgICAgICAgICAgICBjb2xUb1Nob3c6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMZXZlbENvbHVtbnM6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5sYXN0TGV2ZWxEYXRhID8/IFtdLFxuICAgICAgICAgICAgICAgICAgICBkYXRlVmFyaWFibGU6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5kYXRlVmFyaWFibGUsXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0VHlwZTogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmNoYXJ0VHlwZSxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICBpZiAoZ3JhcGguc291cmNlaWQudG9TdHJpbmcoKSA9PSB0aGlzLm10clNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wR3JhcGhEYXRhID0gdGhpcy5kYXRhU2VydmljZS5rZXlDb252ZXJ0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcEdyYXBoRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICByZXNbZGF0YUluZGV4XS5jb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRDaGFydChncmFwaCwgZ3JhcGhELCB0ZW1wR3JhcGhEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuXG4gIGZpbHRlckRhdGEoZGF0YTogYW55LCBzb3VyY2VJZDogYW55KSB7XG4gICAgbGV0IGZpbHRlclRvQXBwbHkgPSB0aGlzLmZpbHRlcnMuZmlsdGVyKFxuICAgICAgKGZpbHRlcjogYW55KSA9PiBmaWx0ZXIuc291cmNlSWQudG9TdHJpbmcoKSA9PSBzb3VyY2VJZC50b1N0cmluZygpXG4gICAgKTtcbiAgICBmaWx0ZXJUb0FwcGx5LmZvckVhY2goKGZpbHRlcjogYW55KSA9PiB7XG4gICAgICBpZiAoZmlsdGVyLnNlbFZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHZhbGlkVmFsdWVzID0gZmlsdGVyLnNlbFZhbHVlcy5tYXAoKHZhbHVlOiBhbnkpID0+IHZhbHVlLnRleHQpO1xuICAgICAgICBsZXQgdGVtcDogYW55ID0gW107XG4gICAgICAgIGxldCBncm91cERhdGEgPSBsb2Rhc2guZ3JvdXBCeShkYXRhLCBmaWx0ZXIuZmllbGROYW1lKTtcbiAgICAgICAgbGV0IGFsbEtleXMgPSBPYmplY3Qua2V5cyhncm91cERhdGEpO1xuICAgICAgICBhbGxLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgIGlmICh2YWxpZFZhbHVlcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICB0ZW1wLnB1c2goLi4uZ3JvdXBEYXRhW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEgPSB0ZW1wO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgYnVpbGRDaGFydCh3aWRnZXREYXRhOiBhbnksIGRhdGE6IGFueSwgdGVtcERhdGE6IGFueSkge1xuICAgIGxldCBfc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGRhdGEgPSB0aGlzLmZpbHRlckRhdGEoZGF0YSwgd2lkZ2V0RGF0YS5zb3VyY2VpZC50b1N0cmluZygpKTtcbiAgICAgIC8vIGRhdGEgPSB0aGlzLmZpbHRlckRhdGEoZGF0YSwgd2lkZ2V0RGF0YS5zb3VyY2VpZCk7XG4gICAgICBpZiAod2lkZ2V0RGF0YS5ncmFwaFR5cGUgPT0gMSkge1xuICAgICAgICBsZXQgZ3JhcGhEYXRhID0ge1xuICAgICAgICAgIGdyYXBoSWQ6ICdncmFwaC0nICsgd2lkZ2V0RGF0YS5ncmFwaF9pZCxcbiAgICAgICAgICBncmFwaFRpdGxlOiB3aWRnZXREYXRhLmdyYXBobmFtZSxcbiAgICAgICAgICByb3dzOiB0ZW1wRGF0YS5yb3dzWzBdLFxuICAgICAgICAgIGNvbHVtbnM6IHRlbXBEYXRhLmNvbHVtbnNbMF0sXG4gICAgICAgICAgZ3JhcGhUeXBlczogd2lkZ2V0RGF0YS5ncmFwaF9zdHJ1Y3R1cmUuY2hhcnRUeXBlWzBdLFxuICAgICAgICAgIGdyYXBoRGF0YTogZGF0YSxcbiAgICAgICAgICBhZ2dyZWdhdGlvbkZ1bmN0aW9uczogdGVtcERhdGEuYWdncmVnYXRpb25GdW5jdGlvbnNbMF0sXG4gICAgICAgICAgZmlsdGVyOiB0ZW1wRGF0YS5maWx0ZXIsXG4gICAgICAgICAgY29sb3JzOiB3aWRnZXREYXRhLmdyYXBoX3N0cnVjdHVyZS5jb2xDb2xvdXJzWzBdLFxuICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICBzdGFydERhdGU6IHdpZGdldERhdGEuZ3JhcGhfc3RydWN0dXJlLnN0YXJ0RGF0ZSxcbiAgICAgICAgICAgIGVuZERhdGU6IHdpZGdldERhdGEuZ3JhcGhfc3RydWN0dXJlLmVuZERhdGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRlVmFyaWFibGU6IHRlbXBEYXRhLmRhdGVWYXJpYWJsZSxcbiAgICAgICAgICByYW5nZUZpbHRlcjogd2lkZ2V0RGF0YS5ncmFwaF9zdHJ1Y3R1cmUucmFuZ2VGaWx0ZXIsXG4gICAgICAgICAgY29tcGFyaXNvbjogd2lkZ2V0RGF0YS5ncmFwaF9zdHJ1Y3R1cmUuY29tcGFyaXNvbiA/PyBbXSxcbiAgICAgICAgICBjdXN0b21WYXJpYWJsZTogdGVtcERhdGEuY3VzdG9tVmFyaWFibGUsXG4gICAgICAgICAgZGF0YUZvcm1hdDogdGVtcERhdGEuZGF0YUZvcm1hdCA/PyBbXSxcbiAgICAgICAgICBsYXN0TGV2ZWxDb2x1bW5zOiB0ZW1wRGF0YS5sYXN0TGV2ZWxDb2x1bW5zID8/IFtdLFxuICAgICAgICB9O1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBfc2VsZi54c2lnaHRzLmJ1aWxkKFdpZGdldFR5cGUuVFJFTkQsIGdyYXBoRGF0YSk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICBfc2VsZi5jaGVja0Rhc2hib2FyZExvYWRpbmcoKTtcbiAgICAgIH0gZWxzZSBpZiAod2lkZ2V0RGF0YS5ncmFwaFR5cGUgPT0gMykge1xuICAgICAgICBsZXQgdGFibGVEYXRhID0ge1xuICAgICAgICAgIHJvd3M6IHRlbXBEYXRhLnJvd3MsXG4gICAgICAgICAgY29sdW1uOiB0ZW1wRGF0YS5jb2x1bW5zLFxuICAgICAgICAgIGFnZ3JlZ2F0aW9uRnVuY3Rpb246IHRlbXBEYXRhLmFnZ3JlZ2F0aW9uRnVuY3Rpb25zLFxuICAgICAgICAgIGZpbHRlcjogdGVtcERhdGEuZmlsdGVyLFxuICAgICAgICAgIGRlcml2ZWRWYXJpYWJsZXM6IHRlbXBEYXRhLmN1c3RvbVZhcmlhYmxlLFxuICAgICAgICAgIGRhdGFGb3JtYXQ6IHRlbXBEYXRhLmRhdGFGb3JtYXQgPz8gW10sXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBjYXRlZ29yaWVzOiB3aWRnZXREYXRhLmdyYXBoX3N0cnVjdHVyZS5jaGFydFR5cGUsXG4gICAgICAgIH07XG4gICAgICAgIF9zZWxmLnRhYmxlRGF0YXNbJ3RhYmxlLWdyYXBoLScgKyB3aWRnZXREYXRhLmdyYXBoX2lkXSA9XG4gICAgICAgICAgYXdhaXQgX3NlbGYueHNpZ2h0cy5idWlsZChXaWRnZXRUeXBlLlBJVk9UX1RBQkxFLCB0YWJsZURhdGEpO1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBfc2VsZi5jaGVja0Rhc2hib2FyZExvYWRpbmcoKTtcbiAgICAgICAgfSwgNTAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBncmFwaGRhdGEgPSB7XG4gICAgICAgICAgZ3JhcGhJZDogJ2dyYXBoLScgKyB3aWRnZXREYXRhLmdyYXBoX2lkLFxuICAgICAgICAgIGdyYXBoVGl0bGU6IHdpZGdldERhdGEuZ3JhcGhuYW1lLFxuICAgICAgICAgIHJvd3M6IHRlbXBEYXRhLnJvd3MsXG4gICAgICAgICAgY29sdW1uczogdGVtcERhdGEuY29sdW1ucyxcbiAgICAgICAgICBhZ2dyZWdhdGlvbkZ1bmN0aW9uczogdGVtcERhdGEuYWdncmVnYXRpb25GdW5jdGlvbnMsXG4gICAgICAgICAgZmlsdGVyOiB0ZW1wRGF0YS5maWx0ZXIsXG4gICAgICAgICAgY3VzdG9tVmFyaWFibGU6IHRlbXBEYXRhLmN1c3RvbVZhcmlhYmxlLFxuICAgICAgICAgIGRhdGFGb3JtYXQ6IHRlbXBEYXRhLmRhdGFGb3JtYXQgPz8gW10sXG4gICAgICAgICAgbGFzdExldmVsQ29sdW1uczogdGVtcERhdGEubGFzdExldmVsQ29sdW1ucyA/PyBbXSxcbiAgICAgICAgICBncmFwaFR5cGVzOiB3aWRnZXREYXRhLmdyYXBoX3N0cnVjdHVyZS5jaGFydFR5cGUsXG4gICAgICAgICAgZ3JhcGhEYXRhOiBkYXRhLFxuICAgICAgICAgIGNvbG9yczogd2lkZ2V0RGF0YS5ncmFwaF9zdHJ1Y3R1cmUuY29sQ29sb3VycyxcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy54c2lnaHRzLmJ1aWxkKFdpZGdldFR5cGUuR1JBUEgsIGdyYXBoZGF0YSk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICBfc2VsZi5jaGVja0Rhc2hib2FyZExvYWRpbmcoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGZpbHRlcmVkRGFzaGJvYXJkKCkge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmRhc2hib2FyZERhdGEuZ3JhcGhzKSB7XG4gICAgICBjb25zdCBncmFwaCA9IGVsZW1lbnQ7XG4gICAgICBsZXQgcmVzID0gbnVsbDtcbiAgICAgIGlmIChncmFwaC5ncmFwaFR5cGUgIT0gMikge1xuICAgICAgICBsZXQgZGF0YUluZGV4ID0gdGhpcy5kdW1wRGF0YS5maW5kSW5kZXgoXG4gICAgICAgICAgKGQ6IGFueSkgPT4gZC5jaGFydElkID09ICdncmFwaC0nICsgZ3JhcGguZ3JhcGhfaWRcbiAgICAgICAgKTtcbiAgICAgICAgcmVzID0gdGhpcy5kdW1wRGF0YVtkYXRhSW5kZXhdLmRhdGE7XG4gICAgICAgIGxldCB0ZW1wR3JhcGhEYXRhID0ge1xuICAgICAgICAgIHJvd3M6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS54QXhpcyxcbiAgICAgICAgICBjb2x1bW5zOiBncmFwaC5ncmFwaF9zdHJ1Y3R1cmUueUF4aXMsXG4gICAgICAgICAgYWdncmVnYXRpb25GdW5jdGlvbnM6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5hZ2dyZWFnYXRpb25zLFxuICAgICAgICAgIGZpbHRlcjogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmZpbHRlcixcbiAgICAgICAgICBjdXN0b21WYXJpYWJsZTogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmRlcml2ZWRWYXJpYWJsZXMsXG4gICAgICAgICAgZGF0YUZvcm1hdDogW10sXG4gICAgICAgICAgY29sVG9TaG93OiBudWxsLFxuICAgICAgICAgIGxhc3RMZXZlbENvbHVtbnM6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5sYXN0TGV2ZWxEYXRhID8/IFtdLFxuICAgICAgICAgIGRhdGVWYXJpYWJsZTogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmRhdGVWYXJpYWJsZSxcbiAgICAgICAgICBjaGFydFR5cGU6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5jaGFydFR5cGUsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChncmFwaC5zb3VyY2VpZC50b1N0cmluZygpID09IHRoaXMubXRyU291cmNlKSB7XG4gICAgICAgICAgdGVtcEdyYXBoRGF0YSA9IHRoaXMuZGF0YVNlcnZpY2Uua2V5Q29udmVydGVyKFxuICAgICAgICAgICAgdGVtcEdyYXBoRGF0YSxcbiAgICAgICAgICAgIHRoaXMuZHVtcERhdGFbZGF0YUluZGV4XS5jb2x1bW5zLFxuICAgICAgICAgICAgMVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWlsZENoYXJ0KGdyYXBoLCByZXMsIHRlbXBHcmFwaERhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSIsIjxkaXYgKm5nSWY9XCJkYXNoYm9hcmREYXRhICE9bnVsbFwiPlxuICAgIDxkaXYgY2xhc3M9XCJkYXNoX2dyYXBoX3NlY1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaF9ncmFwaCBkYXNoYm9hcmQtd3JhcHBlclwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJncmFwaF9uYW1lXCIgc3R5bGU9XCJoZWlnaHQ6IDQ0cHg7XCI+e3tkYXNoYm9hcmREYXRhLmRhc2hib2FyZF9uYW1lfX0gPC9oMz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1jb250YWluZXJcIiAqbmdJZj1cImZpbHRlcnMubGVuZ3RoXCI+XG4gICAgICAgICAgICAgICAgPGgzPkZpbHRlcnM6PC9oMz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTEyIHJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTNcIiAqbmdGb3I9XCJsZXQgZmlsdGVyIG9mIGZpbHRlcnM7bGV0IGk9aW5kZXhcIj4gPG5nLW11bHRpc2VsZWN0LWRyb3Bkb3duIFtwbGFjZWhvbGRlcl09XCInU2VsZWN0ICcgKyBmaWx0ZXIuZmllbGROYW1lICsgJy4uLidcIiBbKG5nTW9kZWwpXT1cImZpbHRlci5zZWxWYWx1ZXNcIiAob25TZWxlY3QpPVwiZmlsdGVyZWREYXNoYm9hcmQoKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9uRGVTZWxlY3QpPVwiZmlsdGVyZWREYXNoYm9hcmQoKVwiIFtzZXR0aW5nc109XCJkcm9wZG93blNldHRpbmdzXCIgW2RhdGFdPVwiZmlsdGVyLnZhbHVlc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1tdWx0aXNlbGVjdC1kcm9wZG93bj4gPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgZ3JhcGhfZGVzaWduXCIgaWQ9XCJkYXNoYm9hcmRTY3JlZW5cIj4gXG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgZ3JhcGggb2YgZGFzaGJvYXJkRGF0YT8uZ3JhcGhzO2xldCBpPWluZGV4O1wiPlxuICAgICAgICAgICAgICAgICAgICA8IS0tIDxkaXYgY2xhc3M9XCJwYWdlLWJyZWFrXCIgKm5nSWY9XCJpICUgNSA9PSAwICYmIGkgIT0gMFwiPjwvZGl2PiAtLT5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImdyYXBoLmdyYXBoVHlwZSAhPSAzICYmIGdyYXBoLmdyYXBoVHlwZSAhPSAyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLWdyYXBoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7J2NvbC1sZy0xMic6IGdyYXBoLmdyYXBoX2luZGV4ID09IDEsJ2NvbC1sZy02JzogZ3JhcGguZ3JhcGhfaW5kZXggPT0gMiwnY29sLWxnLTQnOiBncmFwaC5ncmFwaF9pbmRleCA9PSAzLCdjb2wtbGctMyc6IGdyYXBoLmdyYXBoX2luZGV4ID09IDR9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cIm1pbi1oZWlnaHQ6IDM3MHB4OyBwYWRkaW5nOiAwcHg7XCI+IDwhLS0gbG9hZGVyIHN0YXJ0IC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyAqbmdJZj1cImdyYXBoLmdyYXBoX3N0cnVjdHVyZS54QXhpc1swXSAhPSAnKioqTEFCRUwqKionXCIgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6ICNlZWU7IHBhZGRpbmc6IDJweDtcIj57e2dyYXBoLmdyYXBobmFtZX19PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IFtpZF09XCInZ3JhcGgtJysgZ3JhcGguZ3JhcGhfaWRcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgcGFkZGluZzogMTBweDsgcGFkZGluZy10b3A6IDQ1cHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZHMtZWxsaXBzaXNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiA8IS0tIGxvYWRlciBlbmQgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgIDwhLS0gPGRpdiAqbmdJZj1cImdyYXBoLmdyYXBoVHlwZSAhPTMgJiYgZ3JhcGguZ3JhcGhUeXBlICE9MlwiIGNsYXNzPVwiZGFzaGJvYXJkLWdyYXBoXCIgW2lkXT1cIidncmFwaC0nK1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGguZ3JhcGhfaWRcIiBbbmdDbGFzc109XCJ7J2NvbC1sZy0xMic6IGdyYXBoLmdyYXBoX2luZGV4PT0xLCdjb2wtbGctNic6XG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaC5ncmFwaF9pbmRleD09MiwnY29sLWxnLTQnOiBncmFwaC5ncmFwaF9pbmRleD09MywnY29sLWxnLTMnOiBncmFwaC5ncmFwaF9pbmRleD09NH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJtaW4taGVpZ2h0OiAzNzBweDsgZGlzcGxheTogZmxleDtcIj4gXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGRzLWVsbGlwc2lzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiBcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+IC0tPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZ3JhcGguZ3JhcGhUeXBlPT0yXCIgY2xhc3M9XCJkYXNoYm9hcmQtZ3JhcGhcIiBbaWRdPVwiJ3RhYmxlLWdyYXBoLScrIGdyYXBoLmdyYXBoX2lkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnY29sLWxnLTEyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBoLmdyYXBoX2luZGV4PT0xLCdjb2wtbGctNic6IGdyYXBoLmdyYXBoX2luZGV4PT0yLCdjb2wtbGctNCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaC5ncmFwaF9pbmRleD09MywnY29sLWxnLTMnOiBncmFwaC5ncmFwaF9pbmRleD09NH1cIiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBib3JkZXItYm90dG9tOiAwcHg7IGJhY2tncm91bmQtY29sb3I6YW50aXF1ZXdoaXRlO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBsb2FkZXIgc3RhcnQgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDBweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e2dyYXBoLmdyYXBobmFtZX19PC9oMj4gPCEtLSBsb2FkZXIgZW5kIC0tPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cImdyYXBoLmdyYXBoVHlwZT09M1wiIGNsYXNzPVwiZGFzaGJvYXJkLWdyYXBoXCIgW2lkXT1cIid0YWJsZS1ncmFwaC0nK1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGguZ3JhcGhfaWRcIiBbbmdDbGFzc109XCJ7J2NvbC1sZy0xMic6IGdyYXBoLmdyYXBoX2luZGV4PT0xLCdjb2wtbGctNic6XG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaC5ncmFwaF9pbmRleD09MiwnY29sLWxnLTQnOiBncmFwaC5ncmFwaF9pbmRleD09MywnY29sLWxnLTMnOiBncmFwaC5ncmFwaF9pbmRleD09NH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJtaW4taGVpZ2h0OiAzMDBweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgcGFkZGluZy1ib3R0b206IDIlO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBsb2FkZXIgc3RhcnQgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+e3tncmFwaC5ncmFwaG5hbWV9fTwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwidGFibGVEYXRhcy5oYXNPd25Qcm9wZXJ0eSgndGFibGUtZ3JhcGgtJyArIGdyYXBoLmdyYXBoX2lkKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkeC1waXZvdC1ncmlkIFthbGxvd1NvcnRpbmdCeVN1bW1hcnldPVwidHJ1ZVwiIFthbGxvd1NvcnRpbmddPVwidHJ1ZVwiIFthbGxvd0ZpbHRlcmluZ109XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Nob3dCb3JkZXJzXT1cInRydWVcIiBbZGF0YVNvdXJjZV09XCJ0YWJsZURhdGFzWyd0YWJsZS1ncmFwaC0nICsgZ3JhcGguZ3JhcGhfaWRdXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkeG8tZmllbGQtY2hvb3NlciBbZW5hYmxlZF09XCJmYWxzZVwiPjwvZHhvLWZpZWxkLWNob29zZXI+IDwvZHgtcGl2b3QtZ3JpZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPiA8bmctY29udGFpbmVyICpuZ0lmPVwidGFibGVEYXRhc1sndGFibGUtZ3JhcGgtJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGguZ3JhcGhfaWRdPT11bmRlZmluZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGRzLWVsbGlwc2lzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIGxvYWRlciBlbmQgLS0+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPiA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L2Rpdj4iXX0=