import { Component, EventEmitter, Input, Output } from '@angular/core';
import { WidgetType } from '../../x-sights-core.service';
import Swal from 'sweetalert2';
import * as i0 from "@angular/core";
import * as i1 from "../../services/xsights-backend.service";
import * as i2 from "../../x-sights-core.service";
import * as i3 from "ngx-toastr";
import * as i4 from "@angular/common";
import * as i5 from "../../services/data.service";
import * as i6 from "ng-multiselect-dropdown";
import * as i7 from "devextreme-angular";
import * as i8 from "devextreme-angular/ui/nested";
import * as i9 from "@angular/forms";
export class XSightsBackendDashboardComponent {
    constructor(xsightsBackend, xsights, toastService, datePipe, dataService) {
        this.xsightsBackend = xsightsBackend;
        this.xsights = xsights;
        this.toastService = toastService;
        this.datePipe = datePipe;
        this.dataService = dataService;
        this.systemApis = ['198', '138', '279'];
        this.mtrSource = '138';
        this.dashboardId = 0;
        this.adminId = '0';
        this.showHeader = true;
        this.showFilters = true;
        this.startDate = null;
        this.endDate = null;
        this.toggleDashboard = false;
        this.isDashboardLoaded = new EventEmitter();
        this.showLoading = new EventEmitter();
        this.dashboardData = null;
        this.fromDate = null;
        this.toDate = null;
        this.showHeaderInputs = false;
        this.filters = [];
        this.selFilters = {};
        this.liveRefreshMin = 5;
        this.seriesData = {};
        this.pivotTables = {};
        this.dashPublicUrl = '';
        this.dropdownSettings = {};
        this.tableGraphs = [];
        this.calledSourceData = {};
        if (this.startDate == null) {
            this.fromDate = this.datePipe.transform(new Date(new Date().setDate(new Date().getDate() - 3)), 'yyyy-MM-dd');
        }
        else {
            this.fromDate = this.startDate;
        }
        if (this.endDate == null) {
            this.toDate = this.datePipe.transform(new Date(), 'yyyy-MM-dd');
        }
        else {
            this.toDate = this.endDate;
        }
    }
    ngOnInit() {
        this.dropdownSettings = {
            singleSelection: false,
            enableCheckAll: false,
            allowSearchFilter: true,
        };
        // this.renderPage();
    }
    renderPage() {
        this.showLoading.emit(true);
        this.getGraphDashBoardById();
    }
    ngOnDestroy() {
        //Called once, before the instance is destroyed.
        //Add 'implements OnDestroy' to the class.
        clearInterval(this.dashboardInterval);
    }
    ngOnChanges(changes) {
        //Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.
        //Add '${implements OnChanges}' to the class.
        if (changes['dashboardId']?.currentValue !=
            changes['dashboardId']?.previousValue ||
            changes['adminId']?.currentValue != changes['adminId']?.previousValue ||
            changes['showHeader']?.currentValue !=
                changes['showHeader']?.previousValue ||
            changes['showFilters']?.currentValue !=
                changes['showFilters']?.previousValue ||
            changes['toggleDashboard']?.currentValue !=
                changes['toggleDashboard']?.previousValue) {
            this.renderPage();
        }
    }
    getGraphDashBoardById() {
        let filter = {};
        this.filters.forEach((f) => {
            if (filter[f.sourceId]) {
                filter[f.sourceId] = {
                    ...filter[f.sourceId],
                    [f.fieldName]: f.selValues.map((value) => value.text)
                };
            }
            else {
                filter[f.sourceId] = {
                    [f.fieldName]: f.selValues.map((value) => value.text)
                };
            }
        });
        this.selFilters = filter;
        let data = {
            dashboardId: this.dashboardId,
            filters: filter,
            startDate: this.startDate == null ? null : this.datePipe.transform(new Date(this.startDate), "yyyy-MM-dd"),
            endDate: this.endDate == null ? null : this.datePipe.transform(new Date(this.endDate), "yyyy-MM-dd")
        };
        if (this.isDateDifferenceGreaterThan15Days(this.startDate, this.endDate)) {
            Swal.fire({
                title: "Error",
                text: "Date range greater than 30 days is not supported",
                icon: "error",
                showCloseButton: true
            });
            this.showLoading.emit(false);
            return;
        }
        this.dataService
            .getGraphDashBoardById(data, this.adminId)
            .then(async (res) => {
            this.showLoading.emit(false);
            this.filters = this.filters.length == 0 ? res.data[0]?.filters.map((filter) => {
                filter["values"] = JSON.parse(filter["values"]).map((value, index) => {
                    return {
                        id: index,
                        text: value
                    };
                });
                filter["selValues"] = filter["selValues"] ? filter["selValues"] : [];
                return filter;
            }) ?? [] : this.filters;
            this.seriesData = res.data[0]?.seriesData;
            res.data[0].graphs = res.data[0].graphs.sort(this.setGraphOrder);
            this.dashboardData = res.data[0];
            setTimeout(() => {
                for (const element of this.dashboardData.graphs) {
                    const graph = element;
                    if (this.systemApis.includes(graph.sourceid.toString())) {
                        this.showHeaderInputs = true;
                    }
                    if (graph.graphType != 2 && graph.graphType != 3) {
                        let res = this.seriesData[graph.graph_id];
                        let tempGraphData = {
                            rows: graph.graph_structure.xAxis,
                            columns: graph.graph_structure.yAxis,
                            aggregationFunctions: graph.graph_structure.aggreagations,
                            filter: graph.graph_structure.filter,
                            customVariable: graph.graph_structure.derivedVariables,
                            dataFormat: [],
                            colToShow: null,
                            lastLevelColumns: graph.graph_structure.lastLevelData ?? [],
                            chartType: graph.graph_structure.chartType,
                            dateVariable: graph.graph_structure.dateVariable,
                        };
                        this.buildChart(graph, res, tempGraphData, this.selFilters);
                    }
                    else if (graph.graphType == 3) {
                        this.tableGraphs.push(graph);
                    }
                }
                this.loadingComplete();
            }, 500);
        }).catch(err => {
            console.log(err);
        });
    }
    isDateDifferenceGreaterThan15Days(date1, date2) {
        // Create Date objects
        const startDate = new Date(date1);
        const endDate = new Date(date2);
        // Calculate the difference in milliseconds
        const differenceInMillis = Math.abs(startDate - endDate);
        // Calculate the difference in days
        const differenceInDays = differenceInMillis / (1000 * 60 * 60 * 24);
        // Check if the difference is greater than 15 days
        return differenceInDays > 30;
    }
    async renderTable() {
        if (this.tableGraphs.length > 0) {
            this.tableGraphs.forEach(async (graph) => {
                let data = await this.generateDashboard(graph, false);
                let tempGraphData = {
                    rows: graph.graph_structure.xAxis,
                    columns: graph.graph_structure.yAxis,
                    aggregationFunctions: graph.graph_structure.aggreagations,
                    filter: graph.graph_structure.filter,
                    customVariable: graph.graph_structure.derivedVariables,
                    dataFormat: [],
                    colToShow: null,
                    lastLevelColumns: graph.graph_structure.lastLevelData ?? [],
                    chartType: graph.graph_structure.chartType,
                    dateVariable: graph.graph_structure.dateVariable,
                };
                let dumpData = data;
                if (graph.sourceid.toString() == this.mtrSource) {
                    tempGraphData = this.dataService.keyConverter(tempGraphData, data[0].columns, 1);
                    dumpData = data[0].data;
                }
                this.buildChart(graph, dumpData, tempGraphData, null);
            });
        }
    }
    generateDashboard(graph, reCall = false) {
        return new Promise((resolve, reject) => {
            if (this.calledSourceData.hasOwnProperty(graph.sourceid.toString()) &&
                !reCall) {
                resolve(this.calledSourceData[graph.sourceid.toString()]);
            }
            else {
                let d = {
                    graphId: graph.graph_id,
                    dataFilter: this.selFilters,
                    direction: 0,
                    adminId: this.adminId,
                    shareid: null,
                    startTime: this.startDate ?? this.fromDate,
                    endTime: this.endDate ?? this.toDate
                };
                this.dataService.getGraphDataById(d).then((res) => {
                    Swal.hideLoading();
                    Swal.close();
                    let dumpData = res.data;
                    // this.uniqueSourceData.push(graph);
                    if (graph.dataType == 'remote-json' &&
                        !this.systemApis.includes(graph.sourceid.toString())) {
                        res.data = this.dataService.parseDataFormat(res.data, graph.dataFormat);
                    }
                    this.calledSourceData[graph.sourceid.toString()] = dumpData;
                    resolve(dumpData);
                })
                    .catch((err) => {
                    Swal.hideLoading();
                    Swal.close();
                    this.toastService.error('Unable to Fetch Data');
                });
            }
        });
    }
    buildChart(widgetData, data, tempData, dashboardFilter) {
        let _self = this;
        return new Promise(async (resolve, reject) => {
            let range = {};
            if (this.systemApis.includes(widgetData.sourceid.toString())) {
                range = {
                    startDate: this.startDate ?? this.fromDate,
                    endDate: this.endDate ?? this.toDate,
                };
            }
            if (widgetData.graphType == 1) {
                if (!this.systemApis.includes(widgetData.sourceid.toString())) {
                    range = {
                        startDate: this.datePipe.transform(widgetData.graph_structure.startDate, 'yyyy-MM-dd'),
                        endDate: this.datePipe.transform(widgetData.graph_structure.endDate, 'yyyy-MM-dd'),
                    };
                }
                let graphData = {
                    graphId: 'graph-' + widgetData.graph_id,
                    graphTitle: widgetData.graphname,
                    rows: tempData.rows[0],
                    columns: tempData.columns[0],
                    graphTypes: widgetData.graph_structure.chartType[0],
                    graphData: data,
                    aggregationFunctions: tempData.aggregationFunctions[0],
                    filter: tempData.filter,
                    colors: widgetData.graph_structure.colColours[0],
                    range: range,
                    dateVariable: tempData.dateVariable,
                    rangeFilter: widgetData.graph_structure.rangeFilter,
                    comparison: widgetData.graph_structure.comparison ?? [],
                    customVariable: tempData.customVariable,
                    dataFormat: tempData.dataFormat ?? [],
                    lastLevelColumns: tempData.lastLevelColumns ?? [],
                    selKeys: [],
                    adminId: this.adminId,
                    sourceId: widgetData.sourceId,
                    dashboardFilter: dashboardFilter
                };
                let response = await _self.xsightsBackend.build(WidgetType.TREND, graphData);
                resolve(response);
            }
            else if (widgetData.graphType == 3) {
                let tableData = {
                    rows: tempData.rows,
                    column: tempData.columns,
                    aggregationFunction: tempData.aggregationFunctions,
                    filter: tempData.filter,
                    derivedVariables: tempData.customVariable,
                    dataFormat: tempData.dataFormat ?? [],
                    data: data,
                    range: range,
                    categories: widgetData.graph_structure.chartType
                };
                _self.pivotTables['table-' + widgetData.graph_id] =
                    await _self.xsights.build(WidgetType.PIVOT_TABLE, tableData);
                resolve(true);
            }
            else {
                let graphdata = {
                    graphId: 'graph-' + widgetData.graph_id,
                    graphTitle: widgetData.graphname,
                    rows: tempData.rows,
                    adminId: this.adminId,
                    columns: tempData.columns,
                    aggregationFunctions: tempData.aggregationFunctions,
                    filter: tempData.filter,
                    customVariable: tempData.customVariable,
                    selKeys: [],
                    range: range,
                    sourceId: widgetData.sourceId,
                    dataFormat: tempData.dataFormat ?? [],
                    lastLevelColumns: tempData.lastLevelColumns ?? [],
                    graphTypes: widgetData.graph_structure.chartType,
                    graphData: data,
                    colors: widgetData.graph_structure.colColours,
                    dashboardFilter: dashboardFilter
                };
                setTimeout(() => {
                    let response = this.xsightsBackend.build(WidgetType.GRAPH, graphdata);
                }, 500);
                resolve(true);
            }
        });
    }
    loadingComplete() {
        this.renderTable();
        this.isDashboardLoaded.emit({
            isLoaded: true,
            hasSystemApi: this.showHeaderInputs
        });
    }
    setGraphOrder(a, b) {
        if (a.order < b.order) {
            return -1;
        }
        if (a.order > b.order) {
            return 1;
        }
        return 0;
    }
}
XSightsBackendDashboardComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: XSightsBackendDashboardComponent, deps: [{ token: i1.XsightsBackendService }, { token: i2.XSightsCoreService }, { token: i3.ToastrService }, { token: i4.DatePipe }, { token: i5.DataService }], target: i0.ɵɵFactoryTarget.Component });
XSightsBackendDashboardComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.0.3", type: XSightsBackendDashboardComponent, selector: "lib-x-sights-backend-dashboard", inputs: { dashboardId: "dashboardId", adminId: "adminId", showHeader: "showHeader", showFilters: "showFilters", startDate: "startDate", endDate: "endDate", toggleDashboard: "toggleDashboard" }, outputs: { isDashboardLoaded: "isDashboardLoaded", showLoading: "showLoading" }, usesOnChanges: true, ngImport: i0, template: "<div class=\"row\" *ngIf=\"dashboardData != null\">\n    <div class=\"col-md-12\">\n        <div class=\"dash_graph_sec\">\n            <div class=\"dash_graph\">\n                <div style=\"display: flex; background-color:#000;\" *ngIf=\"showHeader\">\n                    <h3 class=\"graph_name\" style=\"height: 44px;flex:auto;text-transform:capitalize;\">\n                        {{dashboardData.dashboard_name}} &nbsp; <span class=\"badge badge-warning\"\n                            *ngIf=\"dashboardData.dashboard_type == 1\">LIVE</span> </h3>\n                    <div class=\"row date-container\" *ngIf=\"showHeaderInputs\">\n                        <div class=\"col-lg-6\"> <label for=\"startDate\">From &nbsp;&nbsp;</label> <input type=\"date\"\n                                [(ngModel)]=\"fromDate\" id=\"startDate\" class=\"form-control\"> </div>\n                        <div class=\"col-lg-6\"> <label for=\"endDate\">To &nbsp;&nbsp;</label> <input type=\"date\"\n                                [(ngModel)]=\"toDate\" id=\"endDate\" class=\"form-control\">\n                        </div>\n                        <button class=\"btn btn-primary\" (click)=\"renderPage()\">Search</button>\n                    </div>\n                </div>\n                <div class=\"filter-container\" *ngIf=\"filters.length\">\n                    <h3>Filters:</h3>\n                    <div class=\"col-lg-12 row\">\n                        <div class=\"col-lg-3\" *ngFor=\"let filter of filters;let i = index\"> \n                            <ng-multiselect-dropdown\n                                [placeholder]=\"'Select ' + filter.fieldName + '...'\" [(ngModel)]=\"filter.selValues\"\n                                [settings]=\"dropdownSettings\" [data]=\"filter.values\"> \n                            </ng-multiselect-dropdown> \n                        </div>\n                    </div>\n                    <div class=\"col-lg-12\">\n                        <button class=\"btn btn-primary\" (click)=\"getGraphDashBoardById()\">Apply Filter</button>\n                    </div>\n                </div>\n                <div class=\"row graph_design\" id=\"dashboardScreen\" #dashboardScreen> <ng-container\n                        *ngFor=\"let graph of dashboardData.graphs;\">\n                        \n                        <ng-container *ngIf=\"graph.graphType != 3 && graph.graphType != 2\">\n                            <div class=\"dashboard-graph\"\n                                [ngClass]=\"{'col-lg-12': graph.graph_index == 1,'col-lg-6': graph.graph_index == 2,'col-lg-4': graph.graph_index == 3,'col-lg-3': graph.graph_index == 4}\"\n                                style=\"min-height: 370px; padding: 0px;\"> <!-- loader start -->\n                                <h3 *ngIf=\"graph.graph_structure.xAxis[0] != '***LABEL***'\" style=\"text-align: center; background-color: #eee; padding: 2px;\">{{graph.graphname}}</h3>\n                                <div [id]=\"'graph-'+ graph.graph_id\" style=\"position: relative; padding: 10px; padding-top: 45px;\">\n                                    <div class=\"lds-ellipsis\">\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                    </div> <!-- loader end -->\n                                </div>\n                            </div>\n                        </ng-container>\n                        <div *ngIf=\"graph.graphType == 2\" class=\"dashboard-graph\" [id]=\"'table-graph-'+ graph.graph_id\"\n                            [ngClass]=\"{'col-lg-12': graph.graph_index == 1,'col-lg-6': graph.graph_index == 2,'col-lg-4': graph.graph_index == 3,'col-lg-3': graph.graph_index == 4}\"\n                            style=\"display: flex; flex-direction: column; border-bottom: 0px; background-color:antiquewhite;\">\n                            <!-- loader start -->\n                            <h2 style=\"text-align: center; margin-bottom: 0px;\">{{graph.graphname}}</h2>\n                            <!-- loader end -->\n                        </div>\n                        <div *ngIf=\"graph.graphType == 3\" class=\"dashboard-graph\" [id]=\"'table-'+ graph.graph_id\"\n                            [ngClass]=\"{'col-lg-12': graph.graph_index == 1,'col-lg-6': graph.graph_index == 2,'col-lg-4': graph.graph_index == 3,'col-lg-3': graph.graph_index == 4}\"\n                            style=\"min-height: 300px; display: flex; flex-direction: column; padding-bottom: 2%;\">\n                            <!-- loader start -->\n                            <h3 style=\"text-align: center;\">{{graph.graphname}}</h3> <ng-container\n                                *ngIf=\"pivotTables.hasOwnProperty('table-' + graph.graph_id)\"> <dx-pivot-grid\n                                    [allowSortingBySummary]=\"true\" [allowSorting]=\"true\" [allowFiltering]=\"true\"\n                                    [showBorders]=\"true\" [dataSource]=\"pivotTables['table-' + graph.graph_id]\">\n                                    <dxo-field-chooser [enabled]=\"false\"></dxo-field-chooser> </dx-pivot-grid>\n                            </ng-container> <ng-container *ngIf=\"pivotTables['table-' + graph.graph_id] == undefined\">\n                                <div class=\"lds-ellipsis\">\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                </div>\n                            </ng-container> <!-- loader end -->\n                        </div>\n                    </ng-container> </div>\n            </div>\n        </div>\n    </div>\n</div>", styles: [".left-sidebar .nav-link{text-transform:capitalize}.left-sidebar i{margin-right:10px}.left-sidebar .nav-tabs .nav-item{text-transform:capitalize}::ng-deep .left-sidebar .nav-item{text-transform:capitalize}::ng-deep .modal{z-index:1060}.search-filter{height:23px}.search-group{display:flex;align-items:center;justify-content:space-between}.search-group .filter-icon{margin:0}.dash_graph_sec{overflow:auto}.dash_graph_sec .dash_graph{background-color:#fff;margin:15px}.dash_graph_sec .dash_graph .graph_name{text-align:center;align-self:flex-end;color:#fff;padding:5px;margin-bottom:0}.dash_graph_sec .dash_graph .graph_design{margin:0}.dashboard-graph{border:3px solid #dadada;align-items:center;justify-content:center}.modal{z-index:1060!important}::ng-deep .dropdown-custom{inset:103% 0 auto auto!important}.dashname{border-style:groove;background-color:#eee;width:64px;height:34px;display:flex;justify-content:center;align-items:center}.beans-list{padding-left:0;display:flex;flex-wrap:wrap}.beans{border-style:groove;background-color:#fd8309;color:#fff;border-radius:10px;padding:1%;border-color:#fd8309}.graph-source{display:flex;justify-content:space-between;align-items:center}.graph-source h3{margin-bottom:0}.filter-container{padding:10px;background:whitesmoke;border:2px solid #ccc}.filter-container h3{margin-bottom:auto}.filter-container .col-lg-3{padding-left:0}.date-container{justify-content:space-between;align-items:center;color:#fff}.date-container .col-lg-6{display:flex;align-items:center}.date-container .col-lg-6 label{width:70px}\n"], components: [{ type: i6.MultiSelectComponent, selector: "ng-multiselect-dropdown", inputs: ["disabled", "placeholder", "settings", "data"], outputs: ["onFilterChange", "onDropDownClose", "onSelect", "onDeSelect", "onSelectAll", "onDeSelectAll"] }, { type: i7.DxPivotGridComponent, selector: "dx-pivot-grid", inputs: ["allowExpandAll", "allowFiltering", "allowSorting", "allowSortingBySummary", "dataFieldArea", "dataSource", "disabled", "elementAttr", "encodeHtml", "export", "fieldChooser", "fieldPanel", "headerFilter", "height", "hideEmptySummaryCells", "hint", "loadPanel", "rowHeaderLayout", "rtlEnabled", "scrolling", "showBorders", "showColumnGrandTotals", "showColumnTotals", "showRowGrandTotals", "showRowTotals", "showTotalsPrior", "stateStoring", "tabIndex", "texts", "visible", "width", "wordWrapEnabled"], outputs: ["onCellClick", "onCellPrepared", "onContentReady", "onContextMenuPreparing", "onDisposing", "onExporting", "onInitialized", "onOptionChanged", "allowExpandAllChange", "allowFilteringChange", "allowSortingChange", "allowSortingBySummaryChange", "dataFieldAreaChange", "dataSourceChange", "disabledChange", "elementAttrChange", "encodeHtmlChange", "exportChange", "fieldChooserChange", "fieldPanelChange", "headerFilterChange", "heightChange", "hideEmptySummaryCellsChange", "hintChange", "loadPanelChange", "rowHeaderLayoutChange", "rtlEnabledChange", "scrollingChange", "showBordersChange", "showColumnGrandTotalsChange", "showColumnTotalsChange", "showRowGrandTotalsChange", "showRowTotalsChange", "showTotalsPriorChange", "stateStoringChange", "tabIndexChange", "textsChange", "visibleChange", "widthChange", "wordWrapEnabledChange"] }, { type: i8.DxoFieldChooserComponent, selector: "dxo-field-chooser", inputs: ["allowSearch", "applyChangesMode", "enabled", "height", "layout", "searchTimeout", "texts", "title", "width"] }], directives: [{ type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i9.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i9.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i9.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: XSightsBackendDashboardComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-x-sights-backend-dashboard', template: "<div class=\"row\" *ngIf=\"dashboardData != null\">\n    <div class=\"col-md-12\">\n        <div class=\"dash_graph_sec\">\n            <div class=\"dash_graph\">\n                <div style=\"display: flex; background-color:#000;\" *ngIf=\"showHeader\">\n                    <h3 class=\"graph_name\" style=\"height: 44px;flex:auto;text-transform:capitalize;\">\n                        {{dashboardData.dashboard_name}} &nbsp; <span class=\"badge badge-warning\"\n                            *ngIf=\"dashboardData.dashboard_type == 1\">LIVE</span> </h3>\n                    <div class=\"row date-container\" *ngIf=\"showHeaderInputs\">\n                        <div class=\"col-lg-6\"> <label for=\"startDate\">From &nbsp;&nbsp;</label> <input type=\"date\"\n                                [(ngModel)]=\"fromDate\" id=\"startDate\" class=\"form-control\"> </div>\n                        <div class=\"col-lg-6\"> <label for=\"endDate\">To &nbsp;&nbsp;</label> <input type=\"date\"\n                                [(ngModel)]=\"toDate\" id=\"endDate\" class=\"form-control\">\n                        </div>\n                        <button class=\"btn btn-primary\" (click)=\"renderPage()\">Search</button>\n                    </div>\n                </div>\n                <div class=\"filter-container\" *ngIf=\"filters.length\">\n                    <h3>Filters:</h3>\n                    <div class=\"col-lg-12 row\">\n                        <div class=\"col-lg-3\" *ngFor=\"let filter of filters;let i = index\"> \n                            <ng-multiselect-dropdown\n                                [placeholder]=\"'Select ' + filter.fieldName + '...'\" [(ngModel)]=\"filter.selValues\"\n                                [settings]=\"dropdownSettings\" [data]=\"filter.values\"> \n                            </ng-multiselect-dropdown> \n                        </div>\n                    </div>\n                    <div class=\"col-lg-12\">\n                        <button class=\"btn btn-primary\" (click)=\"getGraphDashBoardById()\">Apply Filter</button>\n                    </div>\n                </div>\n                <div class=\"row graph_design\" id=\"dashboardScreen\" #dashboardScreen> <ng-container\n                        *ngFor=\"let graph of dashboardData.graphs;\">\n                        \n                        <ng-container *ngIf=\"graph.graphType != 3 && graph.graphType != 2\">\n                            <div class=\"dashboard-graph\"\n                                [ngClass]=\"{'col-lg-12': graph.graph_index == 1,'col-lg-6': graph.graph_index == 2,'col-lg-4': graph.graph_index == 3,'col-lg-3': graph.graph_index == 4}\"\n                                style=\"min-height: 370px; padding: 0px;\"> <!-- loader start -->\n                                <h3 *ngIf=\"graph.graph_structure.xAxis[0] != '***LABEL***'\" style=\"text-align: center; background-color: #eee; padding: 2px;\">{{graph.graphname}}</h3>\n                                <div [id]=\"'graph-'+ graph.graph_id\" style=\"position: relative; padding: 10px; padding-top: 45px;\">\n                                    <div class=\"lds-ellipsis\">\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                    </div> <!-- loader end -->\n                                </div>\n                            </div>\n                        </ng-container>\n                        <div *ngIf=\"graph.graphType == 2\" class=\"dashboard-graph\" [id]=\"'table-graph-'+ graph.graph_id\"\n                            [ngClass]=\"{'col-lg-12': graph.graph_index == 1,'col-lg-6': graph.graph_index == 2,'col-lg-4': graph.graph_index == 3,'col-lg-3': graph.graph_index == 4}\"\n                            style=\"display: flex; flex-direction: column; border-bottom: 0px; background-color:antiquewhite;\">\n                            <!-- loader start -->\n                            <h2 style=\"text-align: center; margin-bottom: 0px;\">{{graph.graphname}}</h2>\n                            <!-- loader end -->\n                        </div>\n                        <div *ngIf=\"graph.graphType == 3\" class=\"dashboard-graph\" [id]=\"'table-'+ graph.graph_id\"\n                            [ngClass]=\"{'col-lg-12': graph.graph_index == 1,'col-lg-6': graph.graph_index == 2,'col-lg-4': graph.graph_index == 3,'col-lg-3': graph.graph_index == 4}\"\n                            style=\"min-height: 300px; display: flex; flex-direction: column; padding-bottom: 2%;\">\n                            <!-- loader start -->\n                            <h3 style=\"text-align: center;\">{{graph.graphname}}</h3> <ng-container\n                                *ngIf=\"pivotTables.hasOwnProperty('table-' + graph.graph_id)\"> <dx-pivot-grid\n                                    [allowSortingBySummary]=\"true\" [allowSorting]=\"true\" [allowFiltering]=\"true\"\n                                    [showBorders]=\"true\" [dataSource]=\"pivotTables['table-' + graph.graph_id]\">\n                                    <dxo-field-chooser [enabled]=\"false\"></dxo-field-chooser> </dx-pivot-grid>\n                            </ng-container> <ng-container *ngIf=\"pivotTables['table-' + graph.graph_id] == undefined\">\n                                <div class=\"lds-ellipsis\">\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                </div>\n                            </ng-container> <!-- loader end -->\n                        </div>\n                    </ng-container> </div>\n            </div>\n        </div>\n    </div>\n</div>", styles: [".left-sidebar .nav-link{text-transform:capitalize}.left-sidebar i{margin-right:10px}.left-sidebar .nav-tabs .nav-item{text-transform:capitalize}::ng-deep .left-sidebar .nav-item{text-transform:capitalize}::ng-deep .modal{z-index:1060}.search-filter{height:23px}.search-group{display:flex;align-items:center;justify-content:space-between}.search-group .filter-icon{margin:0}.dash_graph_sec{overflow:auto}.dash_graph_sec .dash_graph{background-color:#fff;margin:15px}.dash_graph_sec .dash_graph .graph_name{text-align:center;align-self:flex-end;color:#fff;padding:5px;margin-bottom:0}.dash_graph_sec .dash_graph .graph_design{margin:0}.dashboard-graph{border:3px solid #dadada;align-items:center;justify-content:center}.modal{z-index:1060!important}::ng-deep .dropdown-custom{inset:103% 0 auto auto!important}.dashname{border-style:groove;background-color:#eee;width:64px;height:34px;display:flex;justify-content:center;align-items:center}.beans-list{padding-left:0;display:flex;flex-wrap:wrap}.beans{border-style:groove;background-color:#fd8309;color:#fff;border-radius:10px;padding:1%;border-color:#fd8309}.graph-source{display:flex;justify-content:space-between;align-items:center}.graph-source h3{margin-bottom:0}.filter-container{padding:10px;background:whitesmoke;border:2px solid #ccc}.filter-container h3{margin-bottom:auto}.filter-container .col-lg-3{padding-left:0}.date-container{justify-content:space-between;align-items:center;color:#fff}.date-container .col-lg-6{display:flex;align-items:center}.date-container .col-lg-6 label{width:70px}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.XsightsBackendService }, { type: i2.XSightsCoreService }, { type: i3.ToastrService }, { type: i4.DatePipe }, { type: i5.DataService }]; }, propDecorators: { dashboardId: [{
                type: Input
            }], adminId: [{
                type: Input
            }], showHeader: [{
                type: Input
            }], showFilters: [{
                type: Input
            }], startDate: [{
                type: Input
            }], endDate: [{
                type: Input
            }], toggleDashboard: [{
                type: Input
            }], isDashboardLoaded: [{
                type: Output
            }], showLoading: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieC1zaWdodHMtYmFja2VuZC1kYXNoYm9hcmQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMveC1zaWdodHMtY29yZS9zcmMvbGliL2NvbXBvbmVudHMveC1zaWdodHMtYmFja2VuZC1kYXNoYm9hcmQveC1zaWdodHMtYmFja2VuZC1kYXNoYm9hcmQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMveC1zaWdodHMtY29yZS9zcmMvbGliL2NvbXBvbmVudHMveC1zaWdodHMtYmFja2VuZC1kYXNoYm9hcmQveC1zaWdodHMtYmFja2VuZC1kYXNoYm9hcmQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFJOUYsT0FBTyxFQUFFLFVBQVUsRUFBc0IsTUFBTSw2QkFBNkIsQ0FBQztBQUM3RSxPQUFPLElBQUksTUFBTSxhQUFhLENBQUM7Ozs7Ozs7Ozs7O0FBUy9CLE1BQU0sT0FBTyxnQ0FBZ0M7SUErQjNDLFlBQ1UsY0FBcUMsRUFDckMsT0FBMkIsRUFDM0IsWUFBMkIsRUFDM0IsUUFBa0IsRUFDbEIsV0FBd0I7UUFKeEIsbUJBQWMsR0FBZCxjQUFjLENBQXVCO1FBQ3JDLFlBQU8sR0FBUCxPQUFPLENBQW9CO1FBQzNCLGlCQUFZLEdBQVosWUFBWSxDQUFlO1FBQzNCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFsQzFCLGVBQVUsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDbkMsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUNqQixnQkFBVyxHQUFXLENBQUMsQ0FBQztRQUN4QixZQUFPLEdBQVEsR0FBRyxDQUFDO1FBQ25CLGVBQVUs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S0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQUM7Z0JBQ3hFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQTtnQkFDUCxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDZjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELGVBQWU7UUFDYixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQztZQUMxQixRQUFRLEVBQUUsSUFBSTtZQUNkLFlBQVksRUFBRSxJQUFJLENBQUMsZ0JBQWdCO1NBQ3BDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxhQUFhLENBQUMsQ0FBTSxFQUFFLENBQU07UUFDMUIsSUFBSSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUU7WUFDckIsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUNYO1FBQ0QsSUFBSSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUU7WUFDckIsT0FBTyxDQUFDLENBQUM7U0FDVjtRQUNELE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQzs7NkhBeFdVLGdDQUFnQztpSEFBaEMsZ0NBQWdDLDhXQ2Y3Qywwd0xBOEVNOzJGRC9ETyxnQ0FBZ0M7a0JBTDVDLFNBQVM7K0JBQ0UsZ0NBQWdDOzBOQVFqQyxXQUFXO3NCQUFuQixLQUFLO2dCQUNHLE9BQU87c0JBQWYsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFDRyxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFFSSxpQkFBaUI7c0JBQTFCLE1BQU07Z0JBQ0csV0FBVztzQkFBcEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGVQaXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIGxvZGFzaCBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgVG9hc3RyU2VydmljZSB9IGZyb20gJ25neC10b2FzdHInO1xuaW1wb3J0IHsgRGF0YVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9kYXRhLnNlcnZpY2UnO1xuaW1wb3J0IHsgV2lkZ2V0VHlwZSwgWFNpZ2h0c0NvcmVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4veC1zaWdodHMtY29yZS5zZXJ2aWNlJztcbmltcG9ydCBTd2FsIGZyb20gJ3N3ZWV0YWxlcnQyJztcbmltcG9ydCB7IFhzaWdodHNCYWNrZW5kU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3hzaWdodHMtYmFja2VuZC5zZXJ2aWNlJztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsaWIteC1zaWdodHMtYmFja2VuZC1kYXNoYm9hcmQnLFxuICB0ZW1wbGF0ZVVybDogJy4veC1zaWdodHMtYmFja2VuZC1kYXNoYm9hcmQuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi94LXNpZ2h0cy1iYWNrZW5kLWRhc2hib2FyZC5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgWFNpZ2h0c0JhY2tlbmREYXNoYm9hcmRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIHByaXZhdGUgc3lzdGVtQXBpcyA9IFsnMTk4JywgJzEzOCcsICcyNzknXTtcbiAgcHJpdmF0ZSBtdHJTb3VyY2UgPSAnMTM4JztcbiAgQElucHV0KCkgZGFzaGJvYXJkSWQ6IG51bWJlciA9IDA7XG4gIEBJbnB1dCgpIGFkbWluSWQ6IGFueSA9ICcwJztcbiAgQElucHV0KCkgc2hvd0hlYWRlcjogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIHNob3dGaWx0ZXJzOiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0KCkgc3RhcnREYXRlOiBhbnkgPSBudWxsO1xuICBASW5wdXQoKSBlbmREYXRlOiBhbnkgPSBudWxsO1xuICBASW5wdXQoKSB0b2dnbGVEYXNoYm9hcmQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBAT3V0cHV0KCkgaXNEYXNoYm9hcmRMb2FkZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgc2hvd0xvYWRpbmc6IEV2ZW50RW1pdHRlcjxCb29sZWFuPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBkYXNoYm9hcmREYXRhOiBhbnkgPSBudWxsO1xuICBmcm9tRGF0ZTogYW55ID0gbnVsbDtcbiAgdG9EYXRlOiBhbnkgPSBudWxsO1xuICBzaG93SGVhZGVySW5wdXRzOiBhbnkgPSBmYWxzZTtcbiAgZmlsdGVyczogYW55ID0gW107XG4gIHNlbEZpbHRlcnM6IGFueSA9IHt9O1xuXG4gIGxpdmVSZWZyZXNoTWluOiBhbnkgPSA1O1xuICBzZXJpZXNEYXRhOiBhbnkgPSB7fTtcbiAgcGl2b3RUYWJsZXM6IGFueSA9IHt9O1xuICBkYXNoUHVibGljVXJsOiBhbnkgPSAnJztcbiAgZGFzaGJvYXJkSW50ZXJ2YWw6IGFueTtcbiAgZHJvcGRvd25TZXR0aW5nczogYW55ID0ge307XG4gIHRhYmxlR3JhcGhzIDogYW55ID0gW11cbiAgY2FsbGVkU291cmNlRGF0YSA6IGFueSA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgeHNpZ2h0c0JhY2tlbmQ6IFhzaWdodHNCYWNrZW5kU2VydmljZSxcbiAgICBwcml2YXRlIHhzaWdodHM6IFhTaWdodHNDb3JlU2VydmljZSxcbiAgICBwcml2YXRlIHRvYXN0U2VydmljZTogVG9hc3RyU2VydmljZSxcbiAgICBwcml2YXRlIGRhdGVQaXBlOiBEYXRlUGlwZSxcbiAgICBwcml2YXRlIGRhdGFTZXJ2aWNlOiBEYXRhU2VydmljZVxuICApIHtcbiAgICBpZiAodGhpcy5zdGFydERhdGUgPT0gbnVsbCkge1xuICAgICAgdGhpcy5mcm9tRGF0ZSA9IHRoaXMuZGF0ZVBpcGUudHJhbnNmb3JtKFxuICAgICAgICBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgLSAzKSksXG4gICAgICAgICd5eXl5LU1NLWRkJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mcm9tRGF0ZSA9IHRoaXMuc3RhcnREYXRlO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbmREYXRlID09IG51bGwpIHtcbiAgICAgIHRoaXMudG9EYXRlID0gdGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0obmV3IERhdGUoKSwgJ3l5eXktTU0tZGQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50b0RhdGUgPSB0aGlzLmVuZERhdGU7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5kcm9wZG93blNldHRpbmdzID0ge1xuICAgICAgc2luZ2xlU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgIGVuYWJsZUNoZWNrQWxsOiBmYWxzZSxcbiAgICAgIGFsbG93U2VhcmNoRmlsdGVyOiB0cnVlLFxuICAgIH07XG4gICAgLy8gdGhpcy5yZW5kZXJQYWdlKCk7XG4gIH1cblxuICByZW5kZXJQYWdlKCkge1xuICAgIHRoaXMuc2hvd0xvYWRpbmcuZW1pdCh0cnVlKTtcbiAgICB0aGlzLmdldEdyYXBoRGFzaEJvYXJkQnlJZCgpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgLy9DYWxsZWQgb25jZSwgYmVmb3JlIHRoZSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQuXG4gICAgLy9BZGQgJ2ltcGxlbWVudHMgT25EZXN0cm95JyB0byB0aGUgY2xhc3MuXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmRhc2hib2FyZEludGVydmFsKTtcbiAgfVxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgLy9DYWxsZWQgYmVmb3JlIGFueSBvdGhlciBsaWZlY3ljbGUgaG9vay4gVXNlIGl0IHRvIGluamVjdCBkZXBlbmRlbmNpZXMsIGJ1dCBhdm9pZCBhbnkgc2VyaW91cyB3b3JrIGhlcmUuXG4gICAgLy9BZGQgJyR7aW1wbGVtZW50cyBPbkNoYW5nZXN9JyB0byB0aGUgY2xhc3MuXG4gICAgaWYgKFxuICAgICAgY2hhbmdlc1snZGFzaGJvYXJkSWQnXT8uY3VycmVudFZhbHVlICE9XG4gICAgICAgIGNoYW5nZXNbJ2Rhc2hib2FyZElkJ10/LnByZXZpb3VzVmFsdWUgfHxcbiAgICAgIGNoYW5nZXNbJ2FkbWluSWQnXT8uY3VycmVudFZhbHVlICE9IGNoYW5nZXNbJ2FkbWluSWQnXT8ucHJldmlvdXNWYWx1ZSB8fFxuICAgICAgY2hhbmdlc1snc2hvd0hlYWRlciddPy5jdXJyZW50VmFsdWUgIT1cbiAgICAgICAgY2hhbmdlc1snc2hvd0hlYWRlciddPy5wcmV2aW91c1ZhbHVlIHx8XG4gICAgICBjaGFuZ2VzWydzaG93RmlsdGVycyddPy5jdXJyZW50VmFsdWUgIT1cbiAgICAgICAgY2hhbmdlc1snc2hvd0ZpbHRlcnMnXT8ucHJldmlvdXNWYWx1ZSB8fFxuICAgICAgY2hhbmdlc1sndG9nZ2xlRGFzaGJvYXJkJ10/LmN1cnJlbnRWYWx1ZSAhPVxuICAgICAgICBjaGFuZ2VzWyd0b2dnbGVEYXNoYm9hcmQnXT8ucHJldmlvdXNWYWx1ZVxuICAgICkge1xuICAgICAgdGhpcy5yZW5kZXJQYWdlKCk7XG4gICAgfVxuICB9XG4gXG4gIGdldEdyYXBoRGFzaEJvYXJkQnlJZCgpIHtcbiAgICBsZXQgZmlsdGVyIDogYW55ID0ge31cbiAgICB0aGlzLmZpbHRlcnMuZm9yRWFjaCgoZjogYW55KSA9PiB7XG4gICAgICBpZihmaWx0ZXJbZi5zb3VyY2VJZF0pe1xuICAgICAgICBmaWx0ZXJbZi5zb3VyY2VJZF0gPSB7XG4gICAgICAgICAgLi4uZmlsdGVyW2Yuc291cmNlSWRdLFxuICAgICAgICAgIFtmLmZpZWxkTmFtZV06IGYuc2VsVmFsdWVzLm1hcCgodmFsdWU6IGFueSkgPT4gdmFsdWUudGV4dClcbiAgICAgICAgfVxuICAgICAgfWVsc2V7XG4gICAgICAgIGZpbHRlcltmLnNvdXJjZUlkXSA9IHtcbiAgICAgICAgICBbZi5maWVsZE5hbWVdOiBmLnNlbFZhbHVlcy5tYXAoKHZhbHVlOiBhbnkpID0+IHZhbHVlLnRleHQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMuc2VsRmlsdGVycyA9IGZpbHRlcjtcbiAgICBsZXQgZGF0YSA9IHtcbiAgICAgIGRhc2hib2FyZElkOiB0aGlzLmRhc2hib2FyZElkLFxuICAgICAgZmlsdGVyczogZmlsdGVyLFxuICAgICAgc3RhcnREYXRlOiB0aGlzLnN0YXJ0RGF0ZSA9PSBudWxsID8gbnVsbCA6IHRoaXMuZGF0ZVBpcGUudHJhbnNmb3JtKG5ldyBEYXRlKHRoaXMuc3RhcnREYXRlKSwgXCJ5eXl5LU1NLWRkXCIpLFxuICAgICAgZW5kRGF0ZTogdGhpcy5lbmREYXRlID09IG51bGwgPyBudWxsIDogdGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0obmV3IERhdGUodGhpcy5lbmREYXRlKSwgXCJ5eXl5LU1NLWRkXCIpXG4gICAgfVxuXG4gICAgaWYodGhpcy5pc0RhdGVEaWZmZXJlbmNlR3JlYXRlclRoYW4xNURheXModGhpcy5zdGFydERhdGUsIHRoaXMuZW5kRGF0ZSkpe1xuICAgICAgU3dhbC5maXJlKHtcbiAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgdGV4dDogXCJEYXRlIHJhbmdlIGdyZWF0ZXIgdGhhbiAzMCBkYXlzIGlzIG5vdCBzdXBwb3J0ZWRcIixcbiAgICAgICAgaWNvbjogXCJlcnJvclwiLFxuICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWVcbiAgICAgIH0pXG4gICAgICB0aGlzLnNob3dMb2FkaW5nLmVtaXQoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRhdGFTZXJ2aWNlXG4gICAgICAuZ2V0R3JhcGhEYXNoQm9hcmRCeUlkKGRhdGEsIHRoaXMuYWRtaW5JZClcbiAgICAgIC50aGVuKGFzeW5jIChyZXM6IGFueSkgPT4ge1xuICAgICAgICB0aGlzLnNob3dMb2FkaW5nLmVtaXQoZmFsc2UpO1xuICAgICAgICB0aGlzLmZpbHRlcnMgPSB0aGlzLmZpbHRlcnMubGVuZ3RoID09IDAgPyByZXMuZGF0YVswXT8uZmlsdGVycy5tYXAoKGZpbHRlcjogYW55KSA9PiB7XG4gICAgICAgICAgZmlsdGVyW1widmFsdWVzXCJdID0gSlNPTi5wYXJzZShmaWx0ZXJbXCJ2YWx1ZXNcIl0pLm1hcCgodmFsdWU6IGFueSwgaW5kZXg6IGFueSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6IGluZGV4LFxuICAgICAgICAgICAgICB0ZXh0OiB2YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pIFxuICAgICAgICAgIGZpbHRlcltcInNlbFZhbHVlc1wiXSA9IGZpbHRlcltcInNlbFZhbHVlc1wiXSA/IGZpbHRlcltcInNlbFZhbHVlc1wiXSA6IFtdO1xuICAgICAgICAgIHJldHVybiBmaWx0ZXI7XG4gICAgICAgIH0pID8/IFtdIDogdGhpcy5maWx0ZXJzO1xuICAgICAgICB0aGlzLnNlcmllc0RhdGEgPSByZXMuZGF0YVswXT8uc2VyaWVzRGF0YTtcbiAgICAgICAgcmVzLmRhdGFbMF0uZ3JhcGhzID0gcmVzLmRhdGFbMF0uZ3JhcGhzLnNvcnQodGhpcy5zZXRHcmFwaE9yZGVyKTtcbiAgICAgICAgdGhpcy5kYXNoYm9hcmREYXRhID0gcmVzLmRhdGFbMF07XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmRhc2hib2FyZERhdGEuZ3JhcGhzKSB7XG4gICAgICAgICAgICBjb25zdCBncmFwaCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5zeXN0ZW1BcGlzLmluY2x1ZGVzKGdyYXBoLnNvdXJjZWlkLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2hvd0hlYWRlcklucHV0cyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ3JhcGguZ3JhcGhUeXBlICE9IDIgJiYgZ3JhcGguZ3JhcGhUeXBlICE9IDMpIHtcbiAgICAgICAgICAgICAgbGV0IHJlcyA9IHRoaXMuc2VyaWVzRGF0YVtncmFwaC5ncmFwaF9pZF07XG4gICAgICAgICAgICAgIGxldCB0ZW1wR3JhcGhEYXRhID0ge1xuICAgICAgICAgICAgICAgIHJvd3M6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS54QXhpcyxcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBncmFwaC5ncmFwaF9zdHJ1Y3R1cmUueUF4aXMsXG4gICAgICAgICAgICAgICAgYWdncmVnYXRpb25GdW5jdGlvbnM6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5hZ2dyZWFnYXRpb25zLFxuICAgICAgICAgICAgICAgIGZpbHRlcjogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmZpbHRlcixcbiAgICAgICAgICAgICAgICBjdXN0b21WYXJpYWJsZTogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmRlcml2ZWRWYXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgZGF0YUZvcm1hdDogW10sXG4gICAgICAgICAgICAgICAgY29sVG9TaG93OiBudWxsLFxuICAgICAgICAgICAgICAgIGxhc3RMZXZlbENvbHVtbnM6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5sYXN0TGV2ZWxEYXRhID8/IFtdLFxuICAgICAgICAgICAgICAgIGNoYXJ0VHlwZTogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmNoYXJ0VHlwZSxcbiAgICAgICAgICAgICAgICBkYXRlVmFyaWFibGU6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5kYXRlVmFyaWFibGUsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHRoaXMuYnVpbGRDaGFydChncmFwaCwgcmVzLCB0ZW1wR3JhcGhEYXRhLCB0aGlzLnNlbEZpbHRlcnMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKGdyYXBoLmdyYXBoVHlwZSA9PSAzKXtcbiAgICAgICAgICAgICAgdGhpcy50YWJsZUdyYXBocy5wdXNoKGdyYXBoKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMubG9hZGluZ0NvbXBsZXRlKClcbiAgICAgICAgfSwgNTAwKVxuICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfSk7XG4gIH1cblxuICBpc0RhdGVEaWZmZXJlbmNlR3JlYXRlclRoYW4xNURheXMoZGF0ZTE6IGFueSwgZGF0ZTI6IGFueSkge1xuICAgIC8vIENyZWF0ZSBEYXRlIG9iamVjdHNcbiAgICBjb25zdCBzdGFydERhdGUgOiBhbnkgPSBuZXcgRGF0ZShkYXRlMSk7XG4gICAgY29uc3QgZW5kRGF0ZSA6IGFueSA9IG5ldyBEYXRlKGRhdGUyKTtcbiAgXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBkaWZmZXJlbmNlIGluIG1pbGxpc2Vjb25kc1xuICAgIGNvbnN0IGRpZmZlcmVuY2VJbk1pbGxpcyA9IE1hdGguYWJzKHN0YXJ0RGF0ZSAtIGVuZERhdGUpO1xuICBcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGRpZmZlcmVuY2UgaW4gZGF5c1xuICAgIGNvbnN0IGRpZmZlcmVuY2VJbkRheXMgPSBkaWZmZXJlbmNlSW5NaWxsaXMgLyAoMTAwMCAqIDYwICogNjAgKiAyNCk7XG4gIFxuICAgIC8vIENoZWNrIGlmIHRoZSBkaWZmZXJlbmNlIGlzIGdyZWF0ZXIgdGhhbiAxNSBkYXlzXG4gICAgcmV0dXJuIGRpZmZlcmVuY2VJbkRheXMgPiAzMDtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlclRhYmxlKCl7XG4gICAgaWYodGhpcy50YWJsZUdyYXBocy5sZW5ndGggPiAwKXtcbiAgICAgIHRoaXMudGFibGVHcmFwaHMuZm9yRWFjaChhc3luYyAoZ3JhcGg6IGFueSkgPT4ge1xuICAgICAgICAgIGxldCBkYXRhIDogYW55ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZURhc2hib2FyZChncmFwaCwgZmFsc2UpO1xuICAgICAgICAgIGxldCB0ZW1wR3JhcGhEYXRhID0ge1xuICAgICAgICAgICAgcm93czogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLnhBeGlzLFxuICAgICAgICAgICAgY29sdW1uczogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLnlBeGlzLFxuICAgICAgICAgICAgYWdncmVnYXRpb25GdW5jdGlvbnM6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5hZ2dyZWFnYXRpb25zLFxuICAgICAgICAgICAgZmlsdGVyOiBncmFwaC5ncmFwaF9zdHJ1Y3R1cmUuZmlsdGVyLFxuICAgICAgICAgICAgY3VzdG9tVmFyaWFibGU6IGdyYXBoLmdyYXBoX3N0cnVjdHVyZS5kZXJpdmVkVmFyaWFibGVzLFxuICAgICAgICAgICAgZGF0YUZvcm1hdDogW10sXG4gICAgICAgICAgICBjb2xUb1Nob3c6IG51bGwsXG4gICAgICAgICAgICBsYXN0TGV2ZWxDb2x1bW5zOiBncmFwaC5ncmFwaF9zdHJ1Y3R1cmUubGFzdExldmVsRGF0YSA/PyBbXSxcbiAgICAgICAgICAgIGNoYXJ0VHlwZTogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmNoYXJ0VHlwZSxcbiAgICAgICAgICAgIGRhdGVWYXJpYWJsZTogZ3JhcGguZ3JhcGhfc3RydWN0dXJlLmRhdGVWYXJpYWJsZSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGxldCBkdW1wRGF0YSA9IGRhdGE7XG4gICAgICAgICAgaWYgKGdyYXBoLnNvdXJjZWlkLnRvU3RyaW5nKCkgPT0gdGhpcy5tdHJTb3VyY2UpIHtcbiAgICAgICAgICAgIHRlbXBHcmFwaERhdGEgPSB0aGlzLmRhdGFTZXJ2aWNlLmtleUNvbnZlcnRlcihcbiAgICAgICAgICAgICAgdGVtcEdyYXBoRGF0YSxcbiAgICAgICAgICAgICAgZGF0YVswXS5jb2x1bW5zLFxuICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZHVtcERhdGEgPSBkYXRhWzBdLmRhdGFcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5idWlsZENoYXJ0KGdyYXBoLCBkdW1wRGF0YSwgdGVtcEdyYXBoRGF0YSwgbnVsbCk7XG4gICAgICB9KVxuICAgIH1cbiAgfVxuICBcbiAgZ2VuZXJhdGVEYXNoYm9hcmQoZ3JhcGg6IGFueSwgcmVDYWxsOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmNhbGxlZFNvdXJjZURhdGEuaGFzT3duUHJvcGVydHkoZ3JhcGguc291cmNlaWQudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgIXJlQ2FsbFxuICAgICAgKSB7XG4gICAgICAgIHJlc29sdmUodGhpcy5jYWxsZWRTb3VyY2VEYXRhW2dyYXBoLnNvdXJjZWlkLnRvU3RyaW5nKCldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBkID0ge1xuICAgICAgICAgIGdyYXBoSWQ6IGdyYXBoLmdyYXBoX2lkLFxuICAgICAgICAgIGRhdGFGaWx0ZXI6IHRoaXMuc2VsRmlsdGVycyxcbiAgICAgICAgICBkaXJlY3Rpb246IDAsXG4gICAgICAgICAgYWRtaW5JZDogdGhpcy5hZG1pbklkLFxuICAgICAgICAgIHNoYXJlaWQ6IG51bGwsXG4gICAgICAgICAgc3RhcnRUaW1lOiAgdGhpcy5zdGFydERhdGUgPz8gdGhpcy5mcm9tRGF0ZSxcbiAgICAgICAgICBlbmRUaW1lOiAgdGhpcy5lbmREYXRlID8/IHRoaXMudG9EYXRlXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYXRhU2VydmljZS5nZXRHcmFwaERhdGFCeUlkKGQpLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgICBTd2FsLmhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICBTd2FsLmNsb3NlKCk7XG4gICAgICAgICAgICBsZXQgZHVtcERhdGEgPSByZXMuZGF0YTtcbiAgICAgICAgICAgIC8vIHRoaXMudW5pcXVlU291cmNlRGF0YS5wdXNoKGdyYXBoKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgZ3JhcGguZGF0YVR5cGUgPT0gJ3JlbW90ZS1qc29uJyAmJlxuICAgICAgICAgICAgICAhdGhpcy5zeXN0ZW1BcGlzLmluY2x1ZGVzKGdyYXBoLnNvdXJjZWlkLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmVzLmRhdGEgPSB0aGlzLmRhdGFTZXJ2aWNlLnBhcnNlRGF0YUZvcm1hdChyZXMuZGF0YSwgZ3JhcGguZGF0YUZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNhbGxlZFNvdXJjZURhdGFbZ3JhcGguc291cmNlaWQudG9TdHJpbmcoKV0gPSBkdW1wRGF0YTtcbiAgICAgICAgICAgIHJlc29sdmUoZHVtcERhdGEpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIFN3YWwuaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgIFN3YWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMudG9hc3RTZXJ2aWNlLmVycm9yKCdVbmFibGUgdG8gRmV0Y2ggRGF0YScpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYnVpbGRDaGFydCh3aWRnZXREYXRhOiBhbnksIGRhdGE6IGFueSwgdGVtcERhdGE6IGFueSwgZGFzaGJvYXJkRmlsdGVyOiBhbnkpIHtcbiAgICBsZXQgX3NlbGYgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgcmFuZ2UgOiBhbnkgPSB7fTtcbiAgICAgIGlmICh0aGlzLnN5c3RlbUFwaXMuaW5jbHVkZXMod2lkZ2V0RGF0YS5zb3VyY2VpZC50b1N0cmluZygpKSkge1xuICAgICAgICByYW5nZSA9IHtcbiAgICAgICAgICBzdGFydERhdGU6IHRoaXMuc3RhcnREYXRlID8/IHRoaXMuZnJvbURhdGUsXG4gICAgICAgICAgZW5kRGF0ZTogdGhpcy5lbmREYXRlID8/IHRoaXMudG9EYXRlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKHdpZGdldERhdGEuZ3JhcGhUeXBlID09IDEpIHtcbiAgICAgICAgaWYoIXRoaXMuc3lzdGVtQXBpcy5pbmNsdWRlcyh3aWRnZXREYXRhLnNvdXJjZWlkLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICByYW5nZSA9IHtcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogdGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0oXG4gICAgICAgICAgICAgIHdpZGdldERhdGEuZ3JhcGhfc3RydWN0dXJlLnN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgJ3l5eXktTU0tZGQnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZW5kRGF0ZTogdGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0oXG4gICAgICAgICAgICAgIHdpZGdldERhdGEuZ3JhcGhfc3RydWN0dXJlLmVuZERhdGUsXG4gICAgICAgICAgICAgICd5eXl5LU1NLWRkJ1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGxldCBncmFwaERhdGEgPSB7XG4gICAgICAgICAgZ3JhcGhJZDogJ2dyYXBoLScgKyB3aWRnZXREYXRhLmdyYXBoX2lkLFxuICAgICAgICAgIGdyYXBoVGl0bGU6IHdpZGdldERhdGEuZ3JhcGhuYW1lLFxuICAgICAgICAgIHJvd3M6IHRlbXBEYXRhLnJvd3NbMF0sXG4gICAgICAgICAgY29sdW1uczogdGVtcERhdGEuY29sdW1uc1swXSxcbiAgICAgICAgICBncmFwaFR5cGVzOiB3aWRnZXREYXRhLmdyYXBoX3N0cnVjdHVyZS5jaGFydFR5cGVbMF0sXG4gICAgICAgICAgZ3JhcGhEYXRhOiBkYXRhLFxuICAgICAgICAgIGFnZ3JlZ2F0aW9uRnVuY3Rpb25zOiB0ZW1wRGF0YS5hZ2dyZWdhdGlvbkZ1bmN0aW9uc1swXSxcbiAgICAgICAgICBmaWx0ZXI6IHRlbXBEYXRhLmZpbHRlcixcbiAgICAgICAgICBjb2xvcnM6IHdpZGdldERhdGEuZ3JhcGhfc3RydWN0dXJlLmNvbENvbG91cnNbMF0sXG4gICAgICAgICAgcmFuZ2U6IHJhbmdlLFxuICAgICAgICAgIGRhdGVWYXJpYWJsZTogdGVtcERhdGEuZGF0ZVZhcmlhYmxlLFxuICAgICAgICAgIHJhbmdlRmlsdGVyOiB3aWRnZXREYXRhLmdyYXBoX3N0cnVjdHVyZS5yYW5nZUZpbHRlcixcbiAgICAgICAgICBjb21wYXJpc29uOiB3aWRnZXREYXRhLmdyYXBoX3N0cnVjdHVyZS5jb21wYXJpc29uID8/IFtdLFxuICAgICAgICAgIGN1c3RvbVZhcmlhYmxlOiB0ZW1wRGF0YS5jdXN0b21WYXJpYWJsZSxcbiAgICAgICAgICBkYXRhRm9ybWF0OiB0ZW1wRGF0YS5kYXRhRm9ybWF0ID8/IFtdLFxuICAgICAgICAgIGxhc3RMZXZlbENvbHVtbnM6IHRlbXBEYXRhLmxhc3RMZXZlbENvbHVtbnMgPz8gW10sXG4gICAgICAgICAgc2VsS2V5czogW10sXG4gICAgICAgICAgYWRtaW5JZDogdGhpcy5hZG1pbklkLFxuICAgICAgICAgIHNvdXJjZUlkOiB3aWRnZXREYXRhLnNvdXJjZUlkLFxuICAgICAgICAgIGRhc2hib2FyZEZpbHRlcjogZGFzaGJvYXJkRmlsdGVyXG4gICAgICAgIH07XG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IF9zZWxmLnhzaWdodHNCYWNrZW5kLmJ1aWxkKFdpZGdldFR5cGUuVFJFTkQsIGdyYXBoRGF0YSk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBlbHNlIGlmICh3aWRnZXREYXRhLmdyYXBoVHlwZSA9PSAzKSB7XG4gICAgICAgIGxldCB0YWJsZURhdGEgPSB7XG4gICAgICAgICAgcm93czogdGVtcERhdGEucm93cyxcbiAgICAgICAgICBjb2x1bW46IHRlbXBEYXRhLmNvbHVtbnMsXG4gICAgICAgICAgYWdncmVnYXRpb25GdW5jdGlvbjogdGVtcERhdGEuYWdncmVnYXRpb25GdW5jdGlvbnMsXG4gICAgICAgICAgZmlsdGVyOiB0ZW1wRGF0YS5maWx0ZXIsXG4gICAgICAgICAgZGVyaXZlZFZhcmlhYmxlczogdGVtcERhdGEuY3VzdG9tVmFyaWFibGUsXG4gICAgICAgICAgZGF0YUZvcm1hdDogdGVtcERhdGEuZGF0YUZvcm1hdCA/PyBbXSxcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIHJhbmdlOiByYW5nZSxcbiAgICAgICAgICBjYXRlZ29yaWVzOiB3aWRnZXREYXRhLmdyYXBoX3N0cnVjdHVyZS5jaGFydFR5cGVcbiAgICAgICAgfTtcbiAgICAgICAgX3NlbGYucGl2b3RUYWJsZXNbJ3RhYmxlLScgKyB3aWRnZXREYXRhLmdyYXBoX2lkXSA9XG4gICAgICAgICAgYXdhaXQgX3NlbGYueHNpZ2h0cy5idWlsZChXaWRnZXRUeXBlLlBJVk9UX1RBQkxFLCB0YWJsZURhdGEpO1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGdyYXBoZGF0YSA9IHtcbiAgICAgICAgICBncmFwaElkOiAnZ3JhcGgtJyArIHdpZGdldERhdGEuZ3JhcGhfaWQsXG4gICAgICAgICAgZ3JhcGhUaXRsZTogd2lkZ2V0RGF0YS5ncmFwaG5hbWUsXG4gICAgICAgICAgcm93czogdGVtcERhdGEucm93cyxcbiAgICAgICAgICBhZG1pbklkOiB0aGlzLmFkbWluSWQsXG4gICAgICAgICAgY29sdW1uczogdGVtcERhdGEuY29sdW1ucyxcbiAgICAgICAgICBhZ2dyZWdhdGlvbkZ1bmN0aW9uczogdGVtcERhdGEuYWdncmVnYXRpb25GdW5jdGlvbnMsXG4gICAgICAgICAgZmlsdGVyOiB0ZW1wRGF0YS5maWx0ZXIsXG4gICAgICAgICAgY3VzdG9tVmFyaWFibGU6IHRlbXBEYXRhLmN1c3RvbVZhcmlhYmxlLFxuICAgICAgICAgIHNlbEtleXM6IFtdLFxuICAgICAgICAgIHJhbmdlOiByYW5nZSxcbiAgICAgICAgICBzb3VyY2VJZDogd2lkZ2V0RGF0YS5zb3VyY2VJZCxcbiAgICAgICAgICBkYXRhRm9ybWF0OiB0ZW1wRGF0YS5kYXRhRm9ybWF0ID8/IFtdLFxuICAgICAgICAgIGxhc3RMZXZlbENvbHVtbnM6IHRlbXBEYXRhLmxhc3RMZXZlbENvbHVtbnMgPz8gW10sXG4gICAgICAgICAgZ3JhcGhUeXBlczogd2lkZ2V0RGF0YS5ncmFwaF9zdHJ1Y3R1cmUuY2hhcnRUeXBlLFxuICAgICAgICAgIGdyYXBoRGF0YTogZGF0YSxcbiAgICAgICAgICBjb2xvcnM6IHdpZGdldERhdGEuZ3JhcGhfc3RydWN0dXJlLmNvbENvbG91cnMsXG4gICAgICAgICAgZGFzaGJvYXJkRmlsdGVyOiBkYXNoYm9hcmRGaWx0ZXJcbiAgICAgICAgfTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgbGV0IHJlc3BvbnNlID0gdGhpcy54c2lnaHRzQmFja2VuZC5idWlsZChXaWRnZXRUeXBlLkdSQVBILCBncmFwaGRhdGEpO1xuICAgICAgICB9LCA1MDApXG4gICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgbG9hZGluZ0NvbXBsZXRlKCkge1xuICAgIHRoaXMucmVuZGVyVGFibGUoKTsgIFxuICAgIHRoaXMuaXNEYXNoYm9hcmRMb2FkZWQuZW1pdCh7XG4gICAgICBpc0xvYWRlZDogdHJ1ZSxcbiAgICAgIGhhc1N5c3RlbUFwaTogdGhpcy5zaG93SGVhZGVySW5wdXRzXG4gICAgfSk7XG4gIH1cbiAgc2V0R3JhcGhPcmRlcihhOiBhbnksIGI6IGFueSkge1xuICAgIGlmIChhLm9yZGVyIDwgYi5vcmRlcikge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAoYS5vcmRlciA+IGIub3JkZXIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cInJvd1wiICpuZ0lmPVwiZGFzaGJvYXJkRGF0YSAhPSBudWxsXCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMlwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaF9ncmFwaF9zZWNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXNoX2dyYXBoXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGJhY2tncm91bmQtY29sb3I6IzAwMDtcIiAqbmdJZj1cInNob3dIZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiZ3JhcGhfbmFtZVwiIHN0eWxlPVwiaGVpZ2h0OiA0NHB4O2ZsZXg6YXV0bzt0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3tkYXNoYm9hcmREYXRhLmRhc2hib2FyZF9uYW1lfX0gJm5ic3A7IDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2Utd2FybmluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJkYXNoYm9hcmREYXRhLmRhc2hib2FyZF90eXBlID09IDFcIj5MSVZFPC9zcGFuPiA8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGRhdGUtY29udGFpbmVyXCIgKm5nSWY9XCJzaG93SGVhZGVySW5wdXRzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTZcIj4gPGxhYmVsIGZvcj1cInN0YXJ0RGF0ZVwiPkZyb20gJm5ic3A7Jm5ic3A7PC9sYWJlbD4gPGlucHV0IHR5cGU9XCJkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJmcm9tRGF0ZVwiIGlkPVwic3RhcnREYXRlXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4gPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTZcIj4gPGxhYmVsIGZvcj1cImVuZERhdGVcIj5UbyAmbmJzcDsmbmJzcDs8L2xhYmVsPiA8aW5wdXQgdHlwZT1cImRhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cInRvRGF0ZVwiIGlkPVwiZW5kRGF0ZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiAoY2xpY2spPVwicmVuZGVyUGFnZSgpXCI+U2VhcmNoPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItY29udGFpbmVyXCIgKm5nSWY9XCJmaWx0ZXJzLmxlbmd0aFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDM+RmlsdGVyczo8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTEyIHJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy0zXCIgKm5nRm9yPVwibGV0IGZpbHRlciBvZiBmaWx0ZXJzO2xldCBpID0gaW5kZXhcIj4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLW11bHRpc2VsZWN0LWRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCInU2VsZWN0ICcgKyBmaWx0ZXIuZmllbGROYW1lICsgJy4uLidcIiBbKG5nTW9kZWwpXT1cImZpbHRlci5zZWxWYWx1ZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2V0dGluZ3NdPVwiZHJvcGRvd25TZXR0aW5nc1wiIFtkYXRhXT1cImZpbHRlci52YWx1ZXNcIj4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1tdWx0aXNlbGVjdC1kcm9wZG93bj4gXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbGctMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiAoY2xpY2spPVwiZ2V0R3JhcGhEYXNoQm9hcmRCeUlkKClcIj5BcHBseSBGaWx0ZXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBncmFwaF9kZXNpZ25cIiBpZD1cImRhc2hib2FyZFNjcmVlblwiICNkYXNoYm9hcmRTY3JlZW4+IDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBncmFwaCBvZiBkYXNoYm9hcmREYXRhLmdyYXBocztcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImdyYXBoLmdyYXBoVHlwZSAhPSAzICYmIGdyYXBoLmdyYXBoVHlwZSAhPSAyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZC1ncmFwaFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnY29sLWxnLTEyJzogZ3JhcGguZ3JhcGhfaW5kZXggPT0gMSwnY29sLWxnLTYnOiBncmFwaC5ncmFwaF9pbmRleCA9PSAyLCdjb2wtbGctNCc6IGdyYXBoLmdyYXBoX2luZGV4ID09IDMsJ2NvbC1sZy0zJzogZ3JhcGguZ3JhcGhfaW5kZXggPT0gNH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cIm1pbi1oZWlnaHQ6IDM3MHB4OyBwYWRkaW5nOiAwcHg7XCI+IDwhLS0gbG9hZGVyIHN0YXJ0IC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgKm5nSWY9XCJncmFwaC5ncmFwaF9zdHJ1Y3R1cmUueEF4aXNbMF0gIT0gJyoqKkxBQkVMKioqJ1wiIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOyBwYWRkaW5nOiAycHg7XCI+e3tncmFwaC5ncmFwaG5hbWV9fTwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgW2lkXT1cIidncmFwaC0nKyBncmFwaC5ncmFwaF9pZFwiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyBwYWRkaW5nOiAxMHB4OyBwYWRkaW5nLXRvcDogNDVweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZHMtZWxsaXBzaXNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IDwhLS0gbG9hZGVyIGVuZCAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJncmFwaC5ncmFwaFR5cGUgPT0gMlwiIGNsYXNzPVwiZGFzaGJvYXJkLWdyYXBoXCIgW2lkXT1cIid0YWJsZS1ncmFwaC0nKyBncmFwaC5ncmFwaF9pZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieydjb2wtbGctMTInOiBncmFwaC5ncmFwaF9pbmRleCA9PSAxLCdjb2wtbGctNic6IGdyYXBoLmdyYXBoX2luZGV4ID09IDIsJ2NvbC1sZy00JzogZ3JhcGguZ3JhcGhfaW5kZXggPT0gMywnY29sLWxnLTMnOiBncmFwaC5ncmFwaF9pbmRleCA9PSA0fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBib3JkZXItYm90dG9tOiAwcHg7IGJhY2tncm91bmQtY29sb3I6YW50aXF1ZXdoaXRlO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gbG9hZGVyIHN0YXJ0IC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMHB4O1wiPnt7Z3JhcGguZ3JhcGhuYW1lfX08L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gbG9hZGVyIGVuZCAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cImdyYXBoLmdyYXBoVHlwZSA9PSAzXCIgY2xhc3M9XCJkYXNoYm9hcmQtZ3JhcGhcIiBbaWRdPVwiJ3RhYmxlLScrIGdyYXBoLmdyYXBoX2lkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7J2NvbC1sZy0xMic6IGdyYXBoLmdyYXBoX2luZGV4ID09IDEsJ2NvbC1sZy02JzogZ3JhcGguZ3JhcGhfaW5kZXggPT0gMiwnY29sLWxnLTQnOiBncmFwaC5ncmFwaF9pbmRleCA9PSAzLCdjb2wtbGctMyc6IGdyYXBoLmdyYXBoX2luZGV4ID09IDR9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMwMHB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBwYWRkaW5nLWJvdHRvbTogMiU7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBsb2FkZXIgc3RhcnQgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyO1wiPnt7Z3JhcGguZ3JhcGhuYW1lfX08L2gzPiA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwicGl2b3RUYWJsZXMuaGFzT3duUHJvcGVydHkoJ3RhYmxlLScgKyBncmFwaC5ncmFwaF9pZClcIj4gPGR4LXBpdm90LWdyaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFthbGxvd1NvcnRpbmdCeVN1bW1hcnldPVwidHJ1ZVwiIFthbGxvd1NvcnRpbmddPVwidHJ1ZVwiIFthbGxvd0ZpbHRlcmluZ109XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzaG93Qm9yZGVyc109XCJ0cnVlXCIgW2RhdGFTb3VyY2VdPVwicGl2b3RUYWJsZXNbJ3RhYmxlLScgKyBncmFwaC5ncmFwaF9pZF1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkeG8tZmllbGQtY2hvb3NlciBbZW5hYmxlZF09XCJmYWxzZVwiPjwvZHhvLWZpZWxkLWNob29zZXI+IDwvZHgtcGl2b3QtZ3JpZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj4gPG5nLWNvbnRhaW5lciAqbmdJZj1cInBpdm90VGFibGVzWyd0YWJsZS0nICsgZ3JhcGguZ3JhcGhfaWRdID09IHVuZGVmaW5lZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGRzLWVsbGlwc2lzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj4gPCEtLSBsb2FkZXIgZW5kIC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPiA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvZGl2PiJdfQ==